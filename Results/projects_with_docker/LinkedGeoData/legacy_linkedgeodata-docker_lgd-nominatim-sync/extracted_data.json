{
    "source_code_info": {
        "language": "Java",
        "framework": "Java",
        "dependencies": {
            "pom.xml": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>org.aksw.linkedgeodata</groupId>\n    <artifactId>linkedgeodata-docker</artifactId>\n    <parent>\n\t    <groupId>org.aksw.linkedgeodata</groupId>\n\t    <artifactId>linkedgeodata-parent</artifactId>\n\t    <version>4.0.0-SNAPSHOT</version>\n    </parent>\n    <packaging>jar</packaging>\n    <dependencies>\n        <dependency>\n            <groupId>org.aksw.linkedgeodata</groupId>\n            <artifactId>linkedgeodata-nominatim-core</artifactId>\n\t    <version>2.5.1-1-SNAPSHOT</version>\n        </dependency>\n    </dependencies>\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-dependency-plugin</artifactId>\n            </plugin>\n        </plugins>\n        <pluginManagement>\n            <plugins>\n                <plugin>\n                    <groupId>org.apache.maven.plugins</groupId>\n                    <artifactId>\n                    maven-dependency-plugin</artifactId>\n                    <version>3.0.2</version>\n                    <executions>\n                        <execution>\n                            <phase>prepare-package</phase>\n                            <!-- <phase>package</phase> -->\n                            <goals>\n                                <goal>copy-dependencies</goal>\n                            </goals>\n                        </execution>\n                    </executions>\n                    <configuration>\n                        <!-- <useBaseVersion>false</useBaseVersion> -->\n                        <overWriteReleases>\n                        false</overWriteReleases>\n                        <overWriteSnapshots>\n                        true</overWriteSnapshots>\n                        <excludeTransitive>true</excludeTransitive>\n                        <includeScope>runtime</includeScope>\n                        <outputDirectory>\n                        ${project.build.directory}/lib</outputDirectory>\n                    </configuration>\n                </plugin>\n            </plugins>\n        </pluginManagement>\n    </build>\n\n\n</project>\n"
        },
        "database": null,
        "build_system": "Maven",
        "config_files": {
            "docker-compose.yml": "version: '3.3'\n\nservices:\n\n  lgd-db:\n    env_file: .env\n    build:\n      context: ./lgd-db\n    environment:\n      - POSTGRES_DB=${DB_NAME}\n      - POSTGRES_USER=${DB_USER}\n      - POSTGRES_PASSWORD=${DB_PASS}\n      - PGDATA=/var/lib/postgresql/data\n    sysctls:\n      - kernel.shmmax=10737418240\n    shm_size: 10g\n    volumes:\n      - lgd-db-vol:/var/lib/postgresql/data\n    ports:\n      - ${DB_PORT_EXPOSE}:5432\n    restart: always\n    networks:\n      - lgd-net\n\n  lgd-nominatim-sync:\n    env_file: .env\n    build:\n      context: ./lgd-nominatim-sync\n    depends_on:\n      - lgd-db\n    volumes:\n      - lgd-nominatim-sync-vol:/lgd/nominatim/src/settings\n    restart: on-failure\n    networks:\n      - lgd-net\n\n  lgd-osmosis-sync:\n    env_file: .env\n    build:\n      context: ./lgd-osmosis-sync\n    depends_on:\n      - lgd-db\n    volumes:\n      - lgd-osmosis-sync-vol:/lgd/osmosis/sync\n    restart: on-failure\n    networks:\n      - lgd-net\n\n  lgd-nominatim-web:\n    env_file: .env\n    build:\n      context: ./lgd-nominatim-web\n    depends_on:\n      - lgd-db\n    restart: always\n    ports:\n      - ${NOMINATIM_PORT_EXPOSE}:80\n    networks:\n      - lgd-net\n\n  lgd-ontop-web:\n    env_file: .env\n    build:\n      context: ./lgd-ontop-web\n    environment:\n      - ONTOP_JAVA_ARGS=-Xmx2g\n      - ONTOP_DB_USER=${DB_USER}\n      - ONTOP_DB_PASSWORD=${DB_PASS}\n      - ONTOP_DB_URL=jdbc:${DB_TYPE_JDBC}://${DB_HOST}:${DB_PORT}/${DB_NAME}\n      - ONTOP_DB_DRIVER=org.postgresql.Driver\n      - ONTOP_DEBUG=true\n      - ONTOP_DEV_MODE=true\n      - ONTOP_MAPPING_FILE=/opt/ontop/input/lgd.obda\n      - ONTOP_ONTOLOGY_FILE=/opt/ontop/input/lgd.owl\n      - ONTOP_XML_CATALOG_FILE=/opt/ontop/input/catalog-v001.xml\n      - ONTOP_PORTAL_FILE=/opt/ontop/input/lgd.portal.toml\n    ports:\n      - ${ONTOP_PORT_EXPOSE}:8080\n    depends_on:\n      - lgd-db\n    restart: always\n    networks:\n      - lgd-net\n\n  lgd-sparqlify-web:\n    env_file: .env\n    build:\n      context: ./lgd-sparqlify-web\n    ports:\n      - ${SPARQLIFY_PORT_EXPOSE}:7531\n    depends_on:\n      - lgd-db\n    volumes:\n      - lgd-sparqlify-web-vol:/lgd/sparqlify/conf\n    restart: always\n    networks:\n      - lgd-net\n\n  lgd-pubby-web:\n    image: aksw/dld-present-pubby\n    env_file: .env\n    environment:\n      - STORE_SPARQL_ENDPOINT_URL=${PUBBY_ENDPOINT_URL}\n      - STORE_MAIN_GRAPH=${PUBBY_DEFAULT_GRAPH}\n      - DATASET_BASE=${PUBBY_DATASET_BASE}\n      - WEB_BASE=${PUBBY_WEB_BASE}\n      - INDEX_RESOURCE=${PUBBY_INDEX_RESOURCE}\n      - PORT=8080\n    ports:\n      - ${PUBBY_PORT_EXPOSE}:8080\n    depends_on:\n      - lgd-sparqlify-web\n#     - lgd-ontop-web\n    restart: always\n    networks:\n      - lgd-net\n\nvolumes:\n  lgd-db-vol:\n  lgd-osmosis-sync-vol:\n  lgd-nominatim-sync-vol:\n  lgd-sparqlify-web-vol:\n\nnetworks:\n  lgd-net:\n\n",
            "legacy/linkedgeodata-docker/lgd-nominatim-sync/Dockerfile": "FROM ubuntu:16.04\nMAINTAINER Claus Stadler <cstadler@informatik.uni-leipzig.de>\n\nENV DEBIAN_FRONTEND noninteractive\n\nRUN echo \"force rebuild 7\"\n\nRUN \\\n    apt -y update --fix-missing && \\\n#    apt-get upgrade -y && \\\n    apt install -y software-properties-common wget git curl sudo\n#    apt-get update\n\n\nENV POSTGRES_CLIENT_VERSION 9.5\nENV POSTGIS_CLIENT_VERSION 2.2\n\n#ENV POSTGRES_CLIENT_VERSION ${POSTGRES_VERSION}\n#ENV POSTGIS_CLIENT_VERSION ${POSTGIS_VERSION}\n\nRUN echo \"pgclientver: ${POSTGRES_CLIENT_VERSION}\"\n\n# for 16.04: libgeos-c1v5\nRUN apt-get install -y build-essential libxml2-dev libpq-dev libbz2-dev libtool automake libproj-dev libboost-dev libboost-system-dev libboost-filesystem-dev libboost-thread-dev libexpat-dev gcc proj-bin libgeos-c1v5 libgeos++-dev libexpat-dev php-pgsql php-json php-db postgresql postgis postgresql-contrib postgresql-${POSTGRES_CLIENT_VERSION}-postgis-${POSTGIS_CLIENT_VERSION} postgresql-server-dev-${POSTGRES_CLIENT_VERSION} wget osm2pgsql osmosis gettext-base osmctools\n\n\n# Install the linked geo data package for the lgd-osm-replication-sequences tool\nRUN wget -qO - http://cstadler.aksw.org/repos/apt/conf/packages.precise.gpg.key  | sudo apt-key add - && \\\n    echo 'deb http://cstadler.aksw.org/repos/apt precise main contrib non-free' | sudo tee -a /etc/apt/sources.list.d/cstadler.aksw.org.list && \\\n    apt-get update && \\\n    apt-get install -y linkedgeodata\n\n\nWORKDIR /app/nominatim\n\n# Nominatim install\n#ENV NOMINATIM_VERSION v2.5.1\n#RUN git clone https://github.com/openstreetmap/Nominatim ./src\n#RUN cd ./src && git checkout \"$NOMINATIM_VERSION\"\n\n#RUN git clone --recursive https://github.com/openstreetmap/Nominatim ./src\n#RUN cd ./src && git checkout \"$NOMINATIM_VERSION\" && git submodule update --recursive --init && \\\n#  ./autogen.sh && ./configure && make\n\nCOPY target/nominatim.jar .\nRUN unzip nominatim.jar && mv Nominatim src\n\nRUN echo \"force rebuild b6\"\n\n# Nominatim create site\n\nCOPY local.php.dist ./src/settings/\n\nCOPY setup-patched.php ./src/utils/\nRUN chmod +x ./src/utils/setup-patched.php\n\nCOPY update-patched.php ./src/utils/\nRUN chmod +x ./src/utils/update-patched.php\n\nCOPY lib-patched.php ./lib/lib.php\nRUN chmod +x ./lib/lib.php\n\nCOPY target/nominatim ./src/nominatim/\nRUN chmod +x ./src/nominatim/nominatim\n\nCOPY target/osm2pgsql ./src/osm2pgsql/\nRUN chmod +x ./src/osm2pgsql/osm2pgsql\n\nCOPY target/nominatim.so ./src/module/\n\n\nCOPY configuration.txt.dist ./src/settings/\n\n#RUN rm -rf /var/www/html/* && ./src/utils/setup.php --create-website /var/www/html\n\n# Apache configure\n#COPY nominatim.conf /etc/apache2/sites-enabled/000-default.conf\n\n#ENV DB_HOST test\n#RUN echo \"xxxyyyDB: ${DB_HOST} $DB_URL\"\n\n# Load initial data\n#ENV PBF_DATA http://download.geofabrik.de/europe/monaco-latest.osm.pbf\n#RUN curl -L $PBF_DATA --create-dirs -o /app/src/data.osm.pbf\n#RUN service postgresql start && \\\n#    psql \"$DB_URL\" -c \"CREATE ROLE nominatim;\" || true && \\\n#    psql \"$DB_URL\" -c \"CREATE ROLE www-data NOSUPERUSER NOCREATEDB NOCREATEROL;\" || true && \\\n#    psql \"$DB_URL\" -c \"CREATE DATABASE IF NOT EXISTS nominatim\" && \\\n#    sudo -u postgres psql postgres -c \"DROP DATABASE IF EXISTS nominatim\" && \\\n#    useradd -m -p password1234 nominatim && \\\n#    chown -R nominatim:nominatim ./src && \\\n#    sudo -u nominatim ./src/utils/setup.php --osm-file /app/src/data.osm.pbf --all --threads 2 && \\\n#    service postgresql stop\n\n#EXPOSE 5432\n#EXPOSE 8080\n\n\nCOPY start.sh .\nCOPY wait-for-postgres.sh .\nRUN chmod +x ./start.sh ./wait-for-postgres.sh\nRUN sleep 3\nCMD [ \"./wait-for-postgres.sh\", \"./start.sh\" ]\n\n",
            "legacy/config.properties": "# Currently only postgres is supported\ndatabase.driverClass=org.postgresql.Driver\n\n# Format: jdbc:postgresql://{hostname}/{dbame}\ndatabase.jdbcUrl=jdbc:postgresql://localhost/osm\ndatabase.username=postgres\ndatabase.password=postgres\n\n"
        },
        "static_files": {}
    },
    "project_structure": {
        "files": [
            "Dockerfile",
            "start.sh",
            "wait-for-postgres.sh"
        ],
        "folders": []
    }
}