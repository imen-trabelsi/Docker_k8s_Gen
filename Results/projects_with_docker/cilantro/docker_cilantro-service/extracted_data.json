{
    "source_code_info": {
        "language": "Python",
        "framework": "Flask",
        "dependencies": {
            "pyproject.toml": "[tool.poetry]\nname = \"cilantro-service\"\nversion = \"0.1.0\"\ndescription = \"\"\nauthors = [\"DAI Wiss-IT <dev@dainst.de>\"]\n\n[tool.poetry.dependencies]\npython = \"^3.6.1\"\nwatchdog = \"^0.9.0\"\ncelery = \"^4.2.1\"\nredis = \"^3.3.11\"\nflask = \"^1.1.1\"\nflask-cors = \"^3.0.8\"\nFlask-HTTPAuth = \"^3.3.0\"\nbcrypt = \"^3.1.7\"\ngunicorn = \"^20.0.4\"\ngevent = \"^1.4.0\"\npymongo = \"^3.9.0\"\njsonschema = \"^3.2.0\"\nrequests = \"^2.22.0\"\nlxml = \"^4.6.5\"\n\n[tool.poetry.dev-dependencies]\n\n[build-system]\nrequires = [\"poetry-core>=1.0.0\"]\nbuild-backend = \"poetry.core.masonry.api\"\n"
        },
        "database": "MongoDB",
        "build_system": "poetry",
        "config_files": {
            "docker-compose.yml": "version: '3.5'\n\nx-env-dirs: &env-dirs\n  REPOSITORY_DIR: /data/repository\n  WORKING_DIR: /data/workspace\n  STAGING_DIR: /data/staging\n  CONFIG_DIR: /config\n  RESOURCES_DIR: /app/resources\n  ARCHIVE_DIR: /data/archive\n\nx-env-broker: &env-broker\n  BROKER_HOST: broker\n  BROKER_USER: &broker-user user\n  BROKER_PASSWORD: &broker-password password\n\nx-env-jobdb: &env-jobdb\n  JOB_DB_URL: job-db\n  JOB_DB_PORT: 27017\n  JOB_DB_NAME: job_database\n  FIRST_OBJECT_ID: 1373245\n\nx-env-app-config: &env-app-config\n  BACKEND_URI: &backend-uri http://localhost:5000\n  CILANTRO_ENV: &cilantro-env development\n  OJS_BASE_URL: &ojs-base-url http://mock-server:8080/ojs\n  OJS_URI: &ojs-uri http://mock-server:8080/ojs/plugins/generic/ojs-cilantro-plugin/api\n  OJS_AUTH_KEY: &ojs-auth-key ${OJS_AUTH_KEY}\n  OMP_URI: &omp-uri http://mock-server:8080/omp/plugins/generic/cilantro/api\n  OMP_AUTH_KEY: &omp-auth-key ${OMP_AUTH_KEY}\n  ATOM_URI: &atom-uri http://mock-server:8080/atom\n  ATOM_API_KEY: &atom-api-key ${ATOM_API_KEY}\n  REPOSITORY_URI: &repository-uri http://service:5000/repository\n\nservices:\n\n  broker:\n    image: rabbitmq:3.8\n    environment:\n      RABBITMQ_DEFAULT_USER: *broker-user\n      RABBITMQ_DEFAULT_PASS: *broker-password\n\n  db:\n    image: redis:latest\n    command: [\"redis-server\", \"--appendonly\", \"yes\"]\n    volumes:\n      - ./redis-data:/data\n\n  job-db:\n    container_name: job_db\n    image: mongo:5.0.1\n    volumes:\n      - ./mongo-data:/data/db\n\n  service:\n    container_name: cilantro_service\n    user: ${UID}\n    build:\n      context: .\n      dockerfile: ./docker/cilantro-service/Dockerfile\n    ports:\n      - \"5000:5000\"\n    working_dir: /app\n    volumes:\n      - .:/app\n      - ./data:/data\n      - ./config:/config\n    environment:\n      <<: [*env-dirs, *env-broker, *env-jobdb]\n      DB_HOST: db\n      CILANTRO_ENV: *cilantro-env\n      BACKEND_URI: *backend-uri\n      ATOM_URI: *atom-uri\n      ATOM_API_KEY: *atom-api-key\n      OJS_BASE_URL: *ojs-base-url\n      REPOSITORY_URI: *repository-uri\n\n  default-worker:\n    container_name: cilantro_default_worker\n    user: ${UID}\n    build:\n      context: .\n      dockerfile: ./docker/cilantro-default-worker/Dockerfile\n    working_dir: /app\n    volumes:\n      - .:/app\n      - ./data:/data\n      - ./config:/config\n    environment:\n      <<: [*env-dirs, *env-broker, *env-jobdb]\n      DB_HOST: db\n      CILANTRO_ENV: *cilantro-env\n      BACKEND_URI: *backend-uri\n      OJS_URI: *ojs-uri\n      OJS_AUTH_KEY: *ojs-auth-key\n      OMP_URI: *omp-uri\n      OMP_AUTH_KEY: *omp-auth-key\n      ATOM_URI: *atom-uri\n      ATOM_API_KEY: *atom-api-key\n      REPOSITORY_URI: *repository-uri\n\n  convert-worker:\n    container_name: cilantro_convert_worker\n    user: ${UID}\n    build:\n      context: .\n      dockerfile: ./docker/cilantro-convert-worker/Dockerfile\n    working_dir: /app\n    volumes:\n      - .:/app\n      - ./data:/data\n      - ./config:/config\n    environment:\n      <<: [*env-dirs, *env-broker, *env-jobdb]\n      DB_HOST: db\n      CILANTRO_ENV: *cilantro-env\n\n  nlp-heideltime-worker:\n    container_name: cilantro_nlp_heideltime_worker\n    user: ${UID}\n    build:\n      context: .\n      dockerfile: ./docker/cilantro-nlp-heideltime-worker/Dockerfile\n    working_dir: /app\n    volumes:\n      - .:/app\n      - ./data:/data\n      - ./config:/config\n    environment:\n      <<: [*env-dirs, *env-broker, *env-jobdb]\n      DB_HOST: db\n      CILANTRO_ENV: *cilantro-env\n\n  nlp-worker:\n    container_name: cilantro_nlp_worker\n    user: ${UID}\n    build:\n      context: .\n      dockerfile: ./docker/cilantro-nlp-worker/Dockerfile\n    working_dir: /app\n    volumes:\n      - .:/app\n      - ./data:/data\n      - ./config:/config\n    environment:\n      <<: [*env-dirs, *env-broker, *env-jobdb]\n      DB_HOST: db\n      CILANTRO_ENV: *cilantro-env\n\n  mock-server:\n    image: rodolpheche/wiremock:latest\n    user: ${UID}\n    volumes:\n      - ./test/wiremock_config:/home/wiremock\n",
            "docker/cilantro-service/Dockerfile": "FROM python:3.6-buster\n\nENV LIBRARY_PATH=/lib:/usr/lib\nENV PIPENV_VENV_IN_PROJECT=true\nENV LC_ALL C.UTF-8\nENV LANG C.UTF-8\n\nRUN apt-get update && \\\n    apt-get -y install \\\n    python3-dev \\\n    gcc \\\n    libffi-dev \\\n    musl-dev\n\n# Install dependencies letting poetry use the system python\nRUN pip3 install 'poetry==1.0.9'\nWORKDIR /poetry\nCOPY docker/cilantro-service/pyproject.toml docker/cilantro-service/poetry.lock ./\nRUN poetry config virtualenvs.create false \\\n    && poetry install --no-interaction\n\n# Copy the rest of the app\nWORKDIR /app\nCOPY utils ./utils\nCOPY service ./service\nCOPY resources ./resources\nCOPY workers/task_information.py ./workers/\n\nEXPOSE 5000\nENV FLASK_APP service/run_service.py\n\nCOPY docker/cilantro-service/entrypoint.sh /entrypoint.sh\nCOPY docker/cilantro-service/VERSION .\n\nENTRYPOINT sh /entrypoint.sh\n",
            "Jenkinsfile": "pipeline {\n    agent any\n\n    options {\n        disableConcurrentBuilds()\n        lock resource: 'cilantro'\n    }\n\n    stages {\n        stage('Prepare') {\n            steps {\n                echo 'Preparing..'\n                sh 'make init'\n                sh 'docker-compose build && docker-compose up -d'\n            }\n        }\n        stage('Test backend') {\n            steps {\n                echo 'Testing backend..'\n                sleep 10\n                sh 'make test-backend'\n            }\n        }\n        stage('Test frontend (unit)') {\n            steps {\n                echo 'Testing frontend (unit)..'\n                sh 'make test-frontend'\n            }\n        }\n        stage('Build code documentation') {\n            when{\n                branch 'master'\n            }\n            steps {\n                echo 'Building docu..'\n                sh 'make build-doc'\n            }\n        }\n    }\n    post {\n        always {\n            sh 'make down'\n            sh 'docker-compose logs > docker.log -t'\n            sh 'docker-compose down -v'\n            // clean documentation residues\n            sh 'git clean -f'\n            sh 'rm -rf doc/_build/doctrees/'\n            archiveArtifacts artifacts: 'docker.log', fingerprint: true\n        }\n        success {\n            script {  // Send back-to-normal notification\n                if (env.BRANCH_NAME == 'master') {\n                    if (currentBuild.previousBuild.result != 'SUCCESS') {\n                        rocketSend channel: 'devs', message: \"Back to Normal: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]' (${env.BUILD_URL})\", color: 'GREEN'\n                     }\n                }\n            }\n        }\n        failure {\n            sh 'docker-compose logs'  // write docker logs to Jenkins' logs\n            script {\n                if (env.BRANCH_NAME == 'master') {\n                    rocketSend channel: 'devs', message: \"FAILED: Job '${env.JOB_NAME} [${env.BUILD_NUMBER}]' (${env.BUILD_URL})\", color: 'RED'\n                }\n            }\n        }\n    }\n}\n"
        },
        "static_files": {
            "resources/job_parameter_schemas/ingest_archival_material_schema.json": "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"title\": \"Ingest Records schema\",\n    \"description\": \"Used to validate ingest-records job parameters\",\n    \"type\": \"object\",\n    \"required\": [\n        \"targets\",\n        \"options\"\n    ],\n    \"additionalProperties\": false,\n    \"properties\": {\n        \"targets\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"id\",\n                    \"path\",\n                    \"metadata\"\n                ],\n                \"additionalProperties\": false,\n                \"properties\": {\n                    \"id\": {\n                        \"type\": \"string\"\n                    },\n                    \"path\": {\n                        \"type\": \"string\"\n                    },\n                    \"metadata\": {\n                        \"type\": \"object\",\n                        \"additionalProperties\": false,\n                        \"required\": [\n                            \"title\",\n                            \"creators\",\n                            \"atom_id\",\n                            \"copyright\"\n                        ],\n                        \"properties\": {\n                            \"title\": {\n                                \"type\": \"string\"\n                            },\n                            \"created\": {\n                                \"type\": \"string\"\n                            },\n                            \"authors\": {\n                                \"type\": \"array\",\n                                \"items\": {\n                                    \"type\": \"string\"\n                                }\n                            },\n                            \"notes\": {\n                                \"type\": \"array\",\n                                \"items\": {\n                                    \"type\": \"string\"\n                                }\n                            },\n                            \"atom_id\": {\n                                \"type\": \"string\"\n                            },\n                            \"copyright\": {\n                                \"type\": \"string\"\n                            },\n                            \"reference_code\": {\n                                \"type\": \"string\"\n                            },\n                            \"creators\": {\n                                \"type\": \"array\",\n                                \"items\": {\n                                    \"type\": \"string\"\n                                }\n                            },\n                            \"dates\": {\n                                \"type\": \"array\",\n                                \"items\": {\n                                    \"type\": \"object\"\n                                }\n                            },\n                            \"level_of_description\": {\n                                \"type\": \"string\"\n                            },\n                            \"extent_and_medium\": {\n                                \"type\": \"string\"\n                            },\n                            \"repository\": {\n                                \"type\": \"string\"\n                            },\n                            \"repository_inherited_from\": {\n                                \"type\": \"string\"\n                            },\n                            \"scope_and_content\": {\n                                \"type\": \"string\"\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        \"options\": {\n            \"type\": \"object\",\n            \"required\": [\n                \"ocr_options\"\n            ],\n            \"additionalProperties\": false,\n            \"properties\": {\n                \"ocr_options\": {\n                    \"type\": \"object\",\n                    \"required\": [\n                        \"do_ocr\",\n                        \"ocr_lang\"\n                    ],\n                    \"additionalProperties\": false,\n                    \"properties\": {\n                        \"do_ocr\": {\n                            \"type\": \"boolean\"\n                        },\n                        \"ocr_lang\": {\n                            \"type\": \"string\"\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "resources/job_parameter_schemas/ingest_journals_schema.json": "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"title\": \"Ingest Journal schema\",\n    \"description\": \"Used to validate ingest-journal job parameters\",\n    \"type\": \"object\",\n    \"required\": [\n        \"targets\",\n        \"options\"\n    ],\n    \"additionalProperties\": false,\n    \"properties\": {\n        \"targets\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"id\",\n                    \"path\",\n                    \"metadata\"\n                ],\n                \"additionalProperties\": false,\n                \"properties\": {\n                    \"id\": {\n                        \"type\": \"string\"\n                    },\n                    \"path\": {\n                        \"type\": \"string\"\n                    },\n                    \"metadata\": {\n                        \"type\": \"object\",\n                        \"additionalProperties\": false,\n                        \"required\": [\n                            \"zenon_id\",\n                            \"title\",\n                            \"ojs_journal_code\",\n                            \"articles\"\n                        ],\n                        \"properties\": {\n                            \"zenon_id\": {\n                                \"type\": \"string\"\n                            },\n                            \"title\": {\n                                \"type\": \"string\"\n                            },\n                            \"ojs_journal_code\": {\n                                \"type\": \"string\"\n                            },\n                            \"volume\": {\n                                \"type\": \"number\"\n                            },\n                            \"publishing_year\": {\n                                \"type\": \"number\"\n                            },\n                            \"reporting_year\": {\n                                \"type\": \"number\"\n                            },\n                            \"number\": {\n                                \"type\": \"number\"\n                            },\n                            \"journal_name\": {\n                                \"type\": \"string\"\n                            },\n                            \"articles\": {\n                                \"type\": \"array\",\n                                \"items\": {\n                                    \"type\": \"object\",\n                                    \"required\": [\n                                        \"path\",\n                                        \"zenon_id\",\n                                        \"title\",\n                                        \"authors\",\n                                        \"abstracts\"\n                                    ],\n                                    \"additionalProperties\": false,\n                                    \"properties\": {\n                                        \"path\": {\n                                            \"type\": \"string\"\n                                        },\n                                        \"zenon_id\": {\n                                            \"type\": \"string\"\n                                        },\n                                        \"title\": {\n                                            \"type\": \"string\"\n                                        },\n                                        \"pages\": {\n                                            \"type\": \"string\"\n                                        },\n                                        \"authors\": {\n                                            \"type\": \"array\",\n                                            \"items\": {\n                                                \"type\": \"object\",\n                                                \"required\": [\n                                                    \"givenname\",\n                                                    \"lastname\"\n                                                ],\n                                                \"additionalProperties\": false,\n                                                \"properties\": {\n                                                    \"givenname\": {\n                                                        \"type\": \"string\"\n                                                    },\n                                                    \"lastname\": {\n                                                        \"type\": \"string\"\n                                                    }\n                                                }\n                                            }\n                                        },\n                                        \"abstracts\": {\n                                            \"type\": \"array\",\n                                            \"items\": {\n                                                \"type\": \"string\"\n                                            }\n                                        },\n                                        \"keywords\": {\n                                            \"type\": \"array\",\n                                            \"items\": {\n                                                \"type\": \"string\"\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        \"options\": {\n            \"type\": \"object\",\n            \"required\": [\n                \"ocr_options\"\n            ],\n            \"additionalProperties\": false,\n            \"properties\": {\n                \"ocr_options\": {\n                    \"type\": \"object\",\n                    \"required\": [\n                        \"do_ocr\",\n                        \"ocr_lang\"\n                    ],\n                    \"additionalProperties\": false,\n                    \"properties\": {\n                        \"do_ocr\": {\n                            \"type\": \"boolean\"\n                        },\n                        \"ocr_lang\": {\n                            \"type\": \"string\"\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "resources/job_parameter_schemas/ingest_monographs_schema.json": "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"title\": \"Ingest Monographs schema\",\n    \"description\": \"Used to validate ingest-monograph job parameters\",\n    \"type\": \"object\",\n    \"required\": [\n        \"targets\",\n        \"options\"\n    ],\n    \"additionalProperties\": false,\n    \"properties\": {\n        \"targets\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"id\",\n                    \"path\",\n                    \"metadata\"\n                ],\n                \"additionalProperties\": false,\n                \"properties\": {\n                    \"id\": {\n                        \"type\": \"string\"\n                    },\n                    \"path\": {\n                        \"type\": \"string\"\n                    },\n                    \"metadata\": {\n                        \"type\": \"object\",\n                        \"additionalProperties\": false,\n                        \"required\": [\n                            \"press_code\",\n                            \"zenon_id\",\n                            \"title\",\n                            \"authors\"\n                        ],\n                        \"properties\": {\n                            \"press_code\": {\n                                \"type\": \"string\"\n                            },\n                            \"zenon_id\": {\n                                \"type\": \"string\"\n                            },\n                            \"title\": {\n                                \"type\": \"string\"\n                            },\n                            \"prefix\": {\n                                \"type\": \"string\",\n                                \"default\": \"\"\n                            },\n                            \"subtitle\": {\n                                \"type\": \"string\",\n                                \"default\": \"\"\n                            },\n                            \"abstract\": {\n                                \"type\": \"string\",\n                                \"default\": \"\"\n                            },\n                            \"date_published\": {\n                                \"type\": \"string\",\n                                \"default\": \"\"\n                            },\n                            \"authors\": {\n                                \"type\": \"array\",\n                                \"items\": {\n                                    \"type\": \"object\",\n                                    \"required\": [\"givenname\", \"lastname\"],\n                                    \"additionalProperties\": false,\n                                    \"properties\": {\n                                        \"givenname\": {\n                                            \"type\": \"string\"\n                                        },\n                                        \"lastname\": {\n                                            \"type\": \"string\"\n                                        }\n                                    }\n                                }\n                            },\n                            \"keywords\": {\n                                \"type\": \"array\",\n                                \"items\": {\n                                    \"type\": \"string\",\n                                    \"default\": \"\"\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        \"options\": {\n            \"type\": \"object\",\n            \"required\": [\n                \"ocr_options\"\n            ],\n            \"additionalProperties\": false,\n            \"properties\": {\n                \"ocr_options\": {\n                    \"type\": \"object\",\n                    \"required\": [\n                        \"do_ocr\",\n                        \"ocr_lang\"\n                    ],\n                    \"additionalProperties\": false,\n                    \"properties\": {\n                        \"do_ocr\": {\n                            \"type\": \"boolean\"\n                        },\n                        \"ocr_lang\": {\n                            \"type\": \"string\"\n                        }\n                    }\n                }\n            }\n        }\n    }\n}",
            "resources/job_parameter_schemas/nlp_schema.json": "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"title\": \"Ingest Records schema\",\n    \"description\": \"Used to validate nlp job parameters\",\n    \"type\": \"object\",\n    \"required\": [\"targets\", \"options\"],\n    \"additionalProperties\": false,\n    \"properties\": {\n        \"targets\": {\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"required\": [\"id\", \"path\"],\n                \"additionalProperties\": false,\n                \"properties\": {\n                    \"id\": {\n                        \"type\": \"string\"\n                    },\n                    \"path\": {\n                        \"type\": \"string\"\n                    },\n                    \"metadata\": {\n                        \"type\": \"object\"\n                    }\n                }\n            }\n        },\n        \"options\": {\n            \"type\": \"object\",\n            \"properties\": {\n                \"lang\": {\n                    \"type\": \"string\"\n                },\n                \"document_creation_time\": {\n                    \"type\": \"string\"\n                },\n                \"extensions\": {\n                    \"type\": \"array\",\n                    \"items\": {\n                        \"type\": \"string\"\n                    }\n                }\n            }\n        }\n    }\n}\n",
            "resources/marc_template.xml": "{% set metadata = obj.metadata %}\n{% set parent_metadata = obj.get_parent().metadata %}\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<collection xmlns=\"http://www.loc.gov/MARC21/slim\">\n    <record>\n\n        <leader>     nab a22      a 4500</leader>\n        <controlfield tag=\"008\">160120s2015    gw            000   ger d</controlfield>\n\n        <datafield tag=\"100\" ind1=\"1\" ind2=\" \">\n            <subfield code=\"a\">{{metadata['author'][0]['firstname']}} {{metadata['author'][0]['lastname']}}</subfield>\n        </datafield>\n\n        <datafield tag=\"245\" ind1=\"1\" ind2=\"0\">\n            <subfield code=\"a\">{{metadata['title']}}</subfield>\n            <subfield code=\"b\"></subfield>\n            <subfield code=\"c\">\n                {%- for author_item in metadata['author'] -%}\n                    {{author_item['firstname']}} {{author_item['lastname']}}{%- if not loop.last %}, {% endif %}\n                {% endfor -%}\n            </subfield>\n        </datafield>\n\n        <datafield tag=\"260\" ind1=\" \" ind2=\" \">\n            <subfield code=\"a\">M\u00fcnchen :</subfield>\n            <subfield code=\"b\">Beck,</subfield>\n            <subfield code=\"c\">{{metadata['year']}}</subfield>\n        </datafield>\n\n        <datafield tag=\"300\" ind1=\" \" ind2=\" \">\n            <subfield code=\"a\">{{metadata['pages'].startPrint}}-{{metadata['pages'].endPrint}}</subfield>\n        </datafield>\n\n        <datafield tag=\"504\" ind1=\" \" ind2=\" \">\n            <subfield code=\"a\">includes bibliographical references.</subfield>\n        </datafield>\n\n        <datafield tag=\"590\" ind1=\" \" ind2=\" \">\n            <subfield code=\"a\">arom</subfield>\n        </datafield>\n\n        <datafield tag=\"590\" ind1=\" \" ind2=\" \">\n            <subfield code=\"a\">#loadchiron</subfield>\n        </datafield>\n\n        <datafield tag=\"LKR\" ind1=\" \" ind2=\" \">\n            <subfield code=\"a\">ANA</subfield>\n            <subfield code=\"b\">(manuell: ID des Bandes)</subfield>\n            <subfield code=\"l\">DAI01</subfield>\n            <subfield code=\"n\">Chiron. Mitteilungen der Kommission f\u00fcr Alte Geschichte und Epigraphik des Deutschen Arch\u00e4ologischen Instituts, {{parent_metadata['volume']}} {{parent_metadata['year']}}</subfield>\n            <subfield code=\"m\">{{metadata['title']}}</subfield>\n        </datafield>\n\n    </record>\n</collection>\n",
            "resources/mets_template_archive.xml": "{% set ns = namespace() %}\n{% set ns.id_list = [] %}\n{% set metadata = obj.metadata %}\n{% set object_id = obj.id %}\n{% set server_url = environ['BACKEND_URI'] %}\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mets:mets xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n    xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n    xmlns:mets=\"http://www.loc.gov/METS/\" \n    xmlns:mods=\"http://www.loc.gov/mods/v3\" \n    xmlns:dv=\"http://dfg-viewer.de/\" xsi:schemaLocation=\"http://www.loc.gov/METS/ http://www.loc.gov/mets/mets.xsd\n        http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-2.xsd\">\n\n    <mets:metsHdr LASTMODDATE=\"{{datetime.datetime.utcnow().isoformat()}}\">\n        <mets:agent ROLE=\"CREATOR\" TYPE=\"ORGANIZATION\">\n            <mets:name>Deutsches Arch\u00e4ologisches Institut</mets:name>\n        </mets:agent>\n    </mets:metsHdr>\n\n    <mets:dmdSec ID=\"dmd001\">\n        <mets:mdWrap MIMETYPE=\"text/xml\" MDTYPE=\"MODS\">\n            <mets:xmlData>\n                <mods:mods>\n                    <mods:titleInfo>\n                        <mods:title>{{metadata['title']}}</mods:title>\n                        {% if metadata['subtitle'] %}\n                        <mods:subtitle>{{metadata['subtitle']}}</mods:subtitle>\n                        {% endif %}\n                    </mods:titleInfo>\n                    {% for author in metadata['authors'] %}\n                    <mods:name type=\"personal\">\n                        <mods:displayForm>{{author['givenname']}} {{author['lastname']}}</mods:displayForm>\n                        <mods:role>\n                            <mods:roleTerm authority=\"marcrelator\" type=\"code\">aut</mods:roleTerm>\n                            <mods:roleTerm type=\"text\">Author</mods:roleTerm>\n                        </mods:role>\n                    </mods:name>\n                    {% endfor %}\n                    <mods:originInfo>\n                        {% if metadata['dates'] %}\n                            {% for date in metadata['dates'] %}\n                                {% if date['type'] == 'Creation' %}\n                                    {% if date['start_date'] and date['end_date'] %}\n                                    <mods:dateCreated encoding=\"iso8601\" point=\"start\">{{date['start_date']}}</mods:dateCreated>\n                                    <mods:dateCreated encoding=\"iso8601\" point=\"end\">{{date['end_date']}}</mods:dateCreated>\n                                    {% else %}\n                                    <mods:dateCreated encoding=\"iso8601\" keyDate=\"yes\">{{date['date']}}</mods:dateCreated>\n                                    {% endif %}\n                                {% else %}\n                                    {% if date['start_date'] and date['end_date'] %}\n                                    <mods:dateIssued encoding=\"iso8601\" point=\"start\">{{date['start_date']}}</mods:dateIssued>\n                                    <mods:dateIssued encoding=\"iso8601\" point=\"end\">{{date['end_date']}}</mods:dateIssued>\n                                    {% else %}\n                                    <mods:dateIssued encoding=\"iso8601\" keyDate=\"yes\">{{date['date']}}</mods:dateIssued>\n                                    {% endif %}\n                                {% endif %}\n                            {% endfor %}\n                        {% endif %}\n                    </mods:originInfo>\n                    {% if metadata['scope_and_content'] %}\n                    <mods:abstract>{{metadata['scope_and_content']}}</mods:abstract>\n                    {% endif %}\n                    <mods:physicalDescription>\n                        <mods:extent>{{metadata['extent_and_medium']}}</mods:extent>\n                    </mods:physicalDescription>\n                </mods:mods>\n            </mets:xmlData>\n        </mets:mdWrap>\n    </mets:dmdSec>\n\n    <mets:amdSec ID=\"amd1\">\n        <mets:rightsMD ID=\"rights1\">\n            <mets:mdWrap MIMETYPE=\"text/xml\" MDTYPE=\"OTHER\" OTHERMDTYPE=\"DVRIGHTS\">\n                <mets:xmlData>\n                    <dv:rights>\n                        <dv:owner>Deutsches Arch\u00e4ologisches Institut</dv:owner>\n                        <dv:ownerLogo>https://arachne.uni-koeln.de/arachne/images/dfg-viewer-logo.jpg</dv:ownerLogo>\n                        <dv:ownerSiteURL>https://dainst.org</dv:ownerSiteURL>\n                    </dv:rights>\n                </mets:xmlData>\n            </mets:mdWrap>\n        </mets:rightsMD>\n    </mets:amdSec>\n\n    {% if params['files'] %}\n    <mets:fileSec>\n\n        <mets:fileGrp USE=\"DEFAULT\">\n            {% if params['files']['jpegs'] %}\n                {% for file_path in params['files']['jpegs']|sort() %}\n                    {% set ns.id_list = ns.id_list + [loop.index] %}\n            <mets:file ID=\"file_{{loop.index}}\" MIMETYPE=\"image/jpeg\">\n                        {% set new_file_path = path_join(server_url, 'repository', 'file', object_id, 'data', 'jpg', basename(file_path)) %}\n                <mets:FLocat LOCTYPE=\"URL\" xlink:href=\"{{new_file_path}}\"/>\n            </mets:file>\n                {% endfor %}\n            {% endif %}\n            {% if params['files']['pdfs'] %}\n            <mets:file ID=\"PDF1\" MIMETYPE=\"application/pdf\">\n                    {% for file_path in params['files']['pdfs']|sort() %}\n                <mets:FLocat LOCTYPE=\"URL\" xlink:href=\"{{path_join(server_url, 'repository', 'file', object_id, 'data', 'pdf', basename(file_path))}}\"/>\n                    {% endfor %}\n            </mets:file>\n            {% endif %}\n        </mets:fileGrp>\n        \n        {% if params['files']['thumbnails'] %}\n        <mets:fileGrp USE=\"THUMBS\">\n            {% for file_path in params['files']['thumbnails']|sort() %}\n            <mets:file ID=\"thumb_file_{{loop.index}}\" MIMETYPE=\"image/jpeg\">\n                    {% set new_file_path = path_join(server_url, 'repository', 'file', object_id, 'data', 'jpg', basename(file_path)) %}\n                <mets:FLocat LOCTYPE=\"URL\" xlink:href=\"{{new_file_path}}\"/>\n            </mets:file>\n            {% endfor %}\n        </mets:fileGrp>\n        {% endif %}\n        \n    </mets:fileSec>\n    {% endif %}\n    \n    <mets:structMap TYPE=\"PHYSICAL\">\n        <mets:div ID=\"struct_phys\" TYPE=\"physSequence\">\n            <mets:fptr FILEID=\"PDF1\"/>\n            {# id_list defined in main file #}\n            {% for id in ns.id_list %}\n            <mets:div ID=\"struct_phys_{{id}}\" ORDER=\"{{loop.index}}\" ORDERLABEL=\"{{loop.index}}\" TYPE=\"page\">\n                <mets:fptr FILEID=\"file_{{ns.id_list[loop.index - 1]}}\"/>\n                <mets:fptr FILEID=\"thumb_file_{{ns.id_list[loop.index - 1]}}\"/>\n            </mets:div>\n            {% endfor %}\n        </mets:div>\n    </mets:structMap>\n\n    <mets:structMap TYPE=\"LOGICAL\">\n        <mets:div ID=\"struct_log\" DMDID=\"dmd001\" ADMID=\"amd1\" TYPE=\"document\"></mets:div>\n    </mets:structMap>\n    {% if ns.id_list|length > 0 %}\n    <mets:structLink>\n            {% for id in ns.id_list %}\n        <mets:smLink xlink:from=\"struct_log_1\" xlink:to=\"struct_phys_{{id}}\"/>\n            {% endfor %}\n    </mets:structLink>\n    {% endif %}\n\n</mets:mets>\n",
            "resources/mets_template_journal.xml": "{% set ns = namespace() %}\n{% set ns.id_list = [] %}\n{% set metadata = obj.metadata %}\n{% set object_id = obj.id %}\n{% set server_url = environ['BACKEND_URI'] %}\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mets:mets xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n    xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n    xmlns:mets=\"http://www.loc.gov/METS/\" \n    xmlns:mods=\"http://www.loc.gov/mods/v3\" \n    xmlns:dv=\"http://dfg-viewer.de/\" xsi:schemaLocation=\"http://www.loc.gov/METS/ http://www.loc.gov/mets/mets.xsd\n        http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-2.xsd\">\n\n    <mets:metsHdr LASTMODDATE=\"{{datetime.datetime.utcnow().isoformat()}}\">\n        <mets:agent ROLE=\"CREATOR\" TYPE=\"ORGANIZATION\">\n            <mets:name>Deutsches Arch\u00e4ologisches Institut</mets:name>\n        </mets:agent>\n    </mets:metsHdr>\n\n    <mets:dmdSec ID=\"dmd001\">\n        <mets:mdWrap MIMETYPE=\"text/xml\" MDTYPE=\"MODS\">\n            <mets:xmlData>\n                <mods:mods>\n                    <mods:relatedItem type=\"series\">\n                        <mods:titleInfo>\n                            <mods:title>{{metadata['description']}}</mods:title>\n                        </mods:titleInfo>\n                        <mods:titleInfo TYPE=\"abbreviated\">\n                            <mods:title>{{metadata['ojs_journal_code'] | upper }}</mods:title>\n                        </mods:titleInfo>\n                        <mods:part>\n                            <mods:detail type=\"issue\">{{metadata['number']}}</mods:detail>\n                        </mods:part>\n                    </mods:relatedItem>\n                    <mods:originInfo>\n                        <mods:dateIssued encoding=\"iso8601\" keyDate=\"yes\">{{metadata['publishing_year']}}</mods:dateIssued>\n                    </mods:originInfo>\n                </mods:mods>\n            </mets:xmlData>\n        </mets:mdWrap>\n    </mets:dmdSec>\n\n    <mets:amdSec ID=\"amd1\">\n        <mets:rightsMD ID=\"rights1\">\n            <mets:mdWrap MIMETYPE=\"text/xml\" MDTYPE=\"OTHER\" OTHERMDTYPE=\"DVRIGHTS\">\n                <mets:xmlData>\n                    <dv:rights>\n                        <dv:owner>Deutsches Arch\u00e4ologisches Institut</dv:owner>\n                        <dv:ownerLogo>https://arachne.uni-koeln.de/arachne/images/dfg-viewer-logo.jpg</dv:ownerLogo>\n                        <dv:ownerSiteURL>https://dainst.org</dv:ownerSiteURL>\n                    </dv:rights>\n                    <dv:links>\n                        <dv:reference linktext=\"OPAC\">https://zenon.dainst.org/Record/{{metadata['zenon_id']}}</dv:reference>\n                    </dv:links>\n                </mets:xmlData>\n            </mets:mdWrap>\n        </mets:rightsMD>\n    </mets:amdSec>\n\n    {% if params['files'] %}\n    <mets:fileSec>\n        {% if params['files']['pdfs'] %}\n        <mets:fileGrp USE=\"DEFAULT\">\n            <mets:file ID=\"PDF1\" MIMETYPE=\"application/pdf\">\n                {% for file_path in params['files']['pdfs']|sort() %}\n                <mets:FLocat LOCTYPE=\"URL\" xlink:href=\"{{path_join(server_url, 'repository', 'file', object_id, 'data', 'pdf', basename(file_path))}}\"/>\n                {% endfor %}\n            </mets:file>\n        </mets:fileGrp>\n        {% endif %}\n    </mets:fileSec>\n    {% endif %}\n    \n    <mets:structMap TYPE=\"PHYSICAL\">\n        <mets:div ID=\"struct_phys\" TYPE=\"physSequence\">\n            <mets:fptr FILEID=\"PDF1\" />\n        </mets:div>\n    </mets:structMap>\n\n    <mets:structMap TYPE=\"LOGICAL\">\n        <mets:div ID=\"struct_log\" DMDID=\"dmd001\" ADMID=\"amd1\" TYPE=\"periodical\" LABEL=\"{{metadata['description']}}\"></mets:div>\n    </mets:structMap>\n\n</mets:mets>\n",
            "resources/mets_template_monography.xml": "{% set ns = namespace() %}\n{% set ns.id_list = [] %}\n{% set metadata = obj.metadata %}\n{% set object_id = obj.id %}\n{% set server_url = environ['BACKEND_URI'] %}\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<mets:mets xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n    xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n    xmlns:mets=\"http://www.loc.gov/METS/\" \n    xmlns:mods=\"http://www.loc.gov/mods/v3\" \n    xmlns:dv=\"http://dfg-viewer.de/\" xsi:schemaLocation=\"http://www.loc.gov/METS/ http://www.loc.gov/mets/mets.xsd\n        http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-2.xsd\">\n\n    <mets:metsHdr LASTMODDATE=\"{{datetime.datetime.utcnow().isoformat()}}\">\n        <mets:agent ROLE=\"CREATOR\" TYPE=\"ORGANIZATION\">\n            <mets:name>Deutsches Arch\u00e4ologisches Institut</mets:name>\n        </mets:agent>\n    </mets:metsHdr>\n\n    <mets:dmdSec ID=\"dmd001\">\n        <mets:mdWrap MIMETYPE=\"text/xml\" MDTYPE=\"MODS\">\n            <mets:xmlData>\n                <mods:mods>\n                    <mods:titleInfo>\n                        <mods:title>{{metadata['title']}}</mods:title>\n                        {% if metadata['subtitle'] %}\n                        <mods:subtitle>{{metadata['subtitle']}}</mods:subtitle>\n                        {% endif %}\n                    </mods:titleInfo>\n                    {% for author in metadata['authors'] %}\n                    <mods:name type=\"personal\">\n                        <mods:displayForm>{{author['givenname']}} {{author['lastname']}}</mods:displayForm>\n                        <mods:role>\n                            <mods:roleTerm authority=\"marcrelator\" type=\"code\">aut</mods:roleTerm>\n                            <mods:roleTerm type=\"text\">Author</mods:roleTerm>\n                        </mods:role>\n                    </mods:name>\n                    {% endfor %}\n                    <mods:originInfo>\n                        <mods:dateIssued encoding=\"iso8601\" keyDate=\"yes\">{{metadata['date_published']}}</mods:dateIssued>\n                    </mods:originInfo>\n                    {% if metadata['abstract'] %}\n                    <mods:abstract>{{metadata['abstract']}}\u2260</mods:abstract>\n                    {% endif %}\n                </mods:mods>\n            </mets:xmlData>\n        </mets:mdWrap>\n    </mets:dmdSec>\n\n    <mets:amdSec ID=\"amd1\">\n        <mets:rightsMD ID=\"rights1\">\n            <mets:mdWrap MIMETYPE=\"text/xml\" MDTYPE=\"OTHER\" OTHERMDTYPE=\"DVRIGHTS\">\n                <mets:xmlData>\n                    <dv:rights>\n                        <dv:owner>Deutsches Arch\u00e4ologisches Institut</dv:owner>\n                        <dv:ownerLogo>https://arachne.uni-koeln.de/arachne/images/dfg-viewer-logo.jpg</dv:ownerLogo>\n                        <dv:ownerSiteURL>https://dainst.org</dv:ownerSiteURL>\n                    </dv:rights>\n                    <dv:links>\n                        <dv:reference linktext=\"OPAC\">https://zenon.dainst.org/Record/{{metadata['zenon_id']}}</dv:reference>\n                    </dv:links>\n                </mets:xmlData>\n            </mets:mdWrap>\n        </mets:rightsMD>\n    </mets:amdSec>\n\n    {% if params['files'] %}\n    <mets:fileSec>\n\n        <mets:fileGrp USE=\"DEFAULT\">\n            {% if params['files']['jpegs'] %}\n                {% for file_path in params['files']['jpegs']|sort() %}\n                    {% set ns.id_list = ns.id_list + [loop.index] %}\n            <mets:file ID=\"file_{{loop.index}}\" MIMETYPE=\"image/jpeg\">\n                        {% set new_file_path = path_join(server_url, 'repository', 'file', object_id, 'data', 'jpg', basename(file_path)) %}\n                <mets:FLocat LOCTYPE=\"URL\" xlink:href=\"{{new_file_path}}\"/>\n            </mets:file>\n                {% endfor %}\n            {% endif %}\n            {% if params['files']['pdfs'] %}\n            <mets:file ID=\"PDF1\" MIMETYPE=\"application/pdf\">\n                    {% for file_path in params['files']['pdfs']|sort() %}\n                <mets:FLocat LOCTYPE=\"URL\" xlink:href=\"{{path_join(server_url, 'repository', 'file', object_id, 'data', 'pdf', basename(file_path))}}\"/>\n                    {% endfor %}\n            </mets:file>\n            {% endif %}\n        </mets:fileGrp>\n        \n        {% if params['files']['thumbnails'] %}\n        <mets:fileGrp USE=\"THUMBS\">\n            {% for file_path in params['files']['thumbnails']|sort() %}\n            <mets:file ID=\"thumb_file_{{loop.index}}\" MIMETYPE=\"image/jpeg\">\n                    {% set new_file_path = path_join(server_url, 'repository', 'file', object_id, 'data', 'jpg', basename(file_path)) %}\n                <mets:FLocat LOCTYPE=\"URL\" xlink:href=\"{{new_file_path}}\"/>\n            </mets:file>\n            {% endfor %}\n        </mets:fileGrp>\n        {% endif %}\n        \n    </mets:fileSec>\n    {% endif %}\n    \n    <mets:structMap TYPE=\"PHYSICAL\">\n        <mets:div ID=\"struct_phys\" TYPE=\"physSequence\">\n            <mets:fptr FILEID=\"PDF1\"/>\n            {# id_list defined in main file #}\n            {% for id in ns.id_list %}\n            <mets:div ID=\"struct_phys_{{id}}\" ORDER=\"{{loop.index}}\" ORDERLABEL=\"{{loop.index}}\" TYPE=\"page\">\n                <mets:fptr FILEID=\"file_{{ns.id_list[loop.index - 1]}}\"/>\n                <mets:fptr FILEID=\"thumb_file_{{ns.id_list[loop.index - 1]}}\"/>\n            </mets:div>\n            {% endfor %}\n        </mets:div>\n    </mets:structMap>\n\n{% if metadata['title'] %}\n    <mets:structMap TYPE=\"LOGICAL\">\n        <mets:div ID=\"struct_log\" DMDID=\"dmd001\" ADMID=\"amd1\" TYPE=\"Monograph\" LABEL=\"{{metadata['title']}}\"></mets:div>\n    </mets:structMap>\n{% endif %}\n\n    {% if ns.id_list|length > 0 %}\n    <mets:structLink>\n            {% for id in ns.id_list %}\n        <mets:smLink xlink:from=\"struct_log_1\" xlink:to=\"struct_phys_{{id}}\"/>\n            {% endfor %}\n    </mets:structLink>\n    {% endif %}\n\n</mets:mets>\n",
            "resources/nlp_typesystem_dai.xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<typeSystemDescription xmlns=\"http://uima.apache.org/resourceSpecifier\">\n  <name>German Archaeological Institute (DAI) Named Entity Annotation Type System</name>\n  <description/>\n  <version>1.0</version>\n  <vendor/>\n  <types>\n    <typeDescription>\n      <name>ord.dainst.nlp.Annotation</name>\n      <description>Supertype for DAI NLP annotations</description>\n      <supertypeName>uima.tcas.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>annotatorId</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>org.dainst.nlp.NamedEntity</name>\n      <description/>\n      <supertypeName>ord.dainst.nlp.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>references</name>\n          <description/>\n          <rangeTypeName>uima.cas.StringArray</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>org.dainst.nlp.NamedEntity.Place</name>\n      <supertypeName>org.dainst.nlp.NamedEntity</supertypeName>\n    </typeDescription>\n    <typeDescription>\n      <name>org.dainst.nlp.NamedEntity.Person</name>\n      <supertypeName>org.dainst.nlp.NamedEntity</supertypeName>\n    </typeDescription>\n    <typeDescription>\n      <name>org.dainst.nlp.NamedEntity.TimexDate</name>\n      <supertypeName>org.dainst.nlp.NamedEntity</supertypeName>\n      <features>\n        <featureDescription>\n          <name>timexValue</name>\n          <description>An ISO 8601 encoded Time value for a TimeML Date Timex.</description>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexMod</name>\n          <description>A TimeML modifier like \"APPROX\" or \"BEFORE\"</description>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>org.dainst.nlp.NamedEntity.Temponym</name>\n      <supertypeName>org.dainst.nlp.NamedEntity</supertypeName>\n      <features>\n        <featureDescription>\n          <name>earliestBegin</name>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>latestBegin</name>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>earliestEnd</name>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>latestEnd</name>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>org.dainst.nlp.LayoutElement</name>\n      <supertypeName>ord.dainst.nlp.Annotation</supertypeName>\n    </typeDescription>\n    <typeDescription>\n      <name>org.dainst.nlp.LayoutElement.Page</name>\n      <supertypeName>org.dainst.nlp.LayoutElement</supertypeName>\n      <features>\n        <featureDescription>\n          <name>number</name>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n  </types>\n</typeSystemDescription>\n",
            "resources/nlp_typesystem_heideltime.xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<typeSystemDescription xmlns=\"http://uima.apache.org/resourceSpecifier\">\n  <name>HeidelTime Type System</name>\n  <description/>\n  <version>1.0</version>\n  <vendor/>\n  <types>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.Timex3</name>\n      <description/>\n      <supertypeName>uima.tcas.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>filename</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>sentId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>firstTokId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>allTokIds</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexId</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexInstance</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexType</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexValue</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>foundByRule</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexQuant</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexFreq</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexMod</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      <featureDescription>\n          <name>emptyValue</name>\n          <description>attribute to hold a value for \"empty\" timex3 tags</description>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.Sentence</name>\n      <description/>\n      <supertypeName>uima.tcas.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>filename</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>sentenceId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.Token</name>\n      <description/>\n      <supertypeName>uima.tcas.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>filename</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>tokenId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>sentId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>pos</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.Dct</name>\n      <description/>\n      <supertypeName>uima.tcas.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>filename</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>value</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>timexId</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.SourceDocInfo</name>\n      <description/>\n      <supertypeName>uima.tcas.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>uri</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>offsetInSource</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.Event</name>\n      <description/>\n      <supertypeName>uima.tcas.Annotation</supertypeName>\n      <features>\n        <featureDescription>\n          <name>filename</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>sentId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>tokId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>eventId</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>eventInstanceId</name>\n          <description/>\n          <rangeTypeName>uima.cas.Integer</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>aspect</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>modality</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>polarity</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>tense</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>token</name>\n          <description/>\n          <rangeTypeName>de.unihd.dbs.uima.types.heideltime.Token</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.GoldEvent</name>\n      <description/>\n      <supertypeName>de.unihd.dbs.uima.types.heideltime.Event</supertypeName>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.Timex3Interval</name>\n      <description/>\n      <supertypeName>de.unihd.dbs.uima.types.heideltime.Timex3</supertypeName>\n      <features>\n        <featureDescription>\n          <name>TimexValueEB</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>TimexValueLE</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>TimexValueEE</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>TimexValueLB</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      <featureDescription>\n          <name>beginTimex</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>endTimex</name>\n          <description/>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n        <featureDescription>\n          <name>ref</name>\n          <description>A single URL reference describing the interval or a semicolon-limited list of references</description>\n          <rangeTypeName>uima.cas.String</rangeTypeName>\n        </featureDescription>\n      </features>\n    </typeDescription>\n    <typeDescription>\n      <name>de.unihd.dbs.uima.types.heideltime.IntervalCandidateSentence</name>\n      <description/>\n      <supertypeName>de.unihd.dbs.uima.types.heideltime.Sentence</supertypeName>\n    </typeDescription>\n  </types>\n</typeSystemDescription>\n",
            "resources/ojs3_template_issue.xml": "{% set metadata = obj.metadata %}<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<issue xmlns=\"http://pkp.sfu.ca\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" published=\"0\" current=\"0\" access_status=\"2\">\n    <issue_identification>\n        {% if metadata['volume'] %}\n        <volume>{{metadata['volume']}}</volume>\n        {% endif %}\n        {% if metadata['number'] %}\n        <number>{{metadata['number']}}</number>\n        {% endif %}\n        {% if metadata['reporting_year'] %}\n        <year>{{metadata['reporting_year']}}</year>\n        {% endif %}\n        <title>{{metadata['title']}}</title>\n    </issue_identification>\n    <sections>\n        <section ref=\"ART\" seq=\"0\" editor_restricted=\"0\" meta_indexed=\"1\" meta_reviewed=\"1\" abstracts_not_required=\"0\" hide_title=\"0\" hide_author=\"0\" abstract_word_count=\"0\">\n            <abbrev locale=\"de_DE\">ART</abbrev>\n            <title locale=\"de_DE\">Artikel</title>\n        </section>\n    </sections>\n    <issue_galleys>\n        <issue_galley>\n            <label>Issue PDF</label>\n            <issue_file>\n                <file_name>issue.pdf</file_name>\n                <file_type>PDF</file_type>\n                <file_size>{{getsize(params['files']['pdf']['issue_pdf'][0])}}</file_size>\n                <content_type>1</content_type>\n                <original_file_name>issue.pdf</original_file_name>\n                <date_uploaded>{{datetime.date.today().isoformat()}}</date_uploaded>\n                <date_modified>{{datetime.date.today().isoformat()}}</date_modified>\n                <embed encoding=\"base64\">\n                    {{params['files']['pdf_base64']['issue_pdf'][0]}}\n                </embed>\n            </issue_file>\n        </issue_galley>\n    </issue_galleys>\n    <articles>\n        {% for article in metadata['articles'] %}\n        <article stage=\"production\" \n            locale=\"de_DE\" \n            access_status=\"2\" \n            seq=\"1\" \n            section_ref=\"ART\" \n            date_submitted=\"{{datetime.date.today().isoformat()}}\"\n            date_published=\"{{datetime.date.today().isoformat()}}\">\n            <id type=\"other::zenon\" advice=\"update\">{{article['zenon_id']}}</id>\n            <title locale=\"de_DE\">{{article['title']}}</title>\n            {% for abstract in article['abstracts'] %}\n            <abstract>{{abstract}}</abstract>\n            {% endfor %}\n            <copyrightHolder locale=\"de_DE\">Digitale Ausgaben von Monographien, Reihen- und Sammelwerken des DAI</copyrightHolder>\n            <copyrightHolder locale=\"en_US\">Digital editions of monographs and series of the DAI</copyrightHolder>\n\n            {% if article['keywords'] %}\n            <keywords locale=\"de_DE\">\n                {% for keyword in article['keywords'] %}\n                <keyword>{{keyword}}</keyword>\n                {% endfor %}\n            </keywords>\n            {% endif %}\n\n            <authors>\n            {% if article['authors'] %}\n                {% for author in article['authors'] %}\n                <author primary_contact=\"true\" include_in_browse=\"true\" user_group_ref=\"Author\">\n                    {% if author.givenname == '' %}\n                    <givenname>#TODO#</givenname>\n                    {% else %}\n                    <givenname>{{author.givenname}}</givenname>\n                    {% endif %}\n                    <familyname>{{author.lastname}}</familyname>\n                    <email></email>\n                </author>\n                {% endfor %}\n            {% else %}\n                <author primary_contact=\"true\" include_in_browse=\"false\" user_group_ref=\"Author\">\n                    <givenname>-</givenname>\n                    <familyname></familyname>\n                    <email></email>\n                </author>\n            {% endif %}\n            </authors>\n\n            {% set filesize = getsize(params['files']['pdf']['article-{0}_pdf'.format(loop.index - 1)][0]) %}\n\n            <submission_file id=\"{{loop.index}}\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" stage=\"production_ready\" xsi:schemaLocation=\"http://pkp.sfu.ca native.xsd\">\n                <revision number=\"1\" genre=\"Artikeltext\" filename=\"article-{{loop.index - 1}}.pdf\" viewable=\"false\" filesize=\"{{filesize}}\" filetype=\"application/pdf\">\n                <name locale=\"de_DE\">article-{{loop.index - 1}}.pdf</name>\n                <embed encoding=\"base64\">\n                    {{params['files']['pdf_base64']['article-{0}_pdf'.format(loop.index - 1)][0]}}\n                </embed>\n                </revision>\n            </submission_file>\n            <article_galley xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" approved=\"false\" xsi:schemaLocation=\"http://pkp.sfu.ca native.xsd\">\n                <name locale=\"de_DE\">PDF</name>\n                <seq>{{loop.index}}</seq>\n                <submission_file_ref id=\"{{loop.index}}\" revision=\"1\"/>\n            </article_galley>\n\n            {% if article['pages'] %}\n            <pages>{{ article['pages'] }}</pages>\n            {% endif %}\n\n        </article>\n        {% endfor %}\n    </articles>\n</issue>",
            "resources/omp_template.xml": "{% set metadata = obj.metadata %}\n{% set pdf_file_path = path_join(obj.get_representation_dir('pdf'), obj.id + '.pdf') %}<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<monograph xmlns=\"http://pkp.sfu.ca\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n           xmlns:onix=\"http://ns.editeur.org/onix/3.0/reference\" stage=\"production\" xsi:schemaLocation=\"http://pkp.sfu.ca native.xsd\">\n    <id type=\"internal\" advice=\"ignore\">1</id>\n    <id type=\"other::zenon\" advice=\"update\">{{metadata['zenon_id']}}</id>\n    <title>#TODO#{{metadata['title']}}</title>\n    <prefix>{{metadata['prefix']}}</prefix>\n    <subtitle>{{metadata['subtitle']}}</subtitle>\n    <abstract>{{metadata['abstract']}}</abstract>\n\n    <copyrightHolder locale=\"de_DE\">Digitale Ausgaben von Monographien, Reihen- und Sammelwerken des DAI</copyrightHolder>\n    <copyrightHolder locale=\"en_US\">Digital editions of monographs and series of the DAI</copyrightHolder>\n\n    {% if metadata['keywords'] %}\n    <keywords locale=\"de_DE\">\n        {% for keyword in metadata['keywords'] %}\n        <keyword>{{keyword}}</keyword>\n        {% endfor %}\n    </keywords>\n    {% endif %}\n\n    <authors xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://pkp.sfu.ca native.xsd\">\n        {% if metadata['authors'] %}\n            {% for author in metadata['authors'] %}\n            <author primary_contact=\"true\" include_in_browse=\"true\" user_group_ref=\"Author\">\n                {% if author.givenname == '' %}\n                <givenname>#TODO#</givenname>\n                {% else %}\n                <givenname>{{author.givenname}}</givenname>\n                {% endif %}\n                <familyname>{{author.lastname}}</familyname>\n                <email></email>\n            </author>\n            {% endfor %}\n        {% else %}\n            <author primary_contact=\"true\" include_in_browse=\"false\" user_group_ref=\"Author\">\n                <givenname>-</givenname>\n                <familyname></familyname>\n                <email></email>\n            </author>\n        {% endif %}\n    </authors>\n    <submission_file xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                     stage=\"production_ready\" id=\"1\" xsi:schemaLocation=\"http://pkp.sfu.ca native.xsd\">\n        <revision number=\"1\" genre=\"Book Manuscript\" filename=\"merged.pdf\"\n                  viewable=\"true\"\n                  date_uploaded=\"{{datetime.date.today().strftime('%Y-%m-%d')}}\"\n                  date_modified=\"{{datetime.date.today().strftime('%Y-%m-%d')}}\"\n                  filesize=\"{{getsize(pdf_file_path)}}\"\n                  filetype=\"application/pdf\">\n            <name>workbench-creation</name>\n            <embed encoding=\"base64\">\n                {{params['pdf_base64']}}\n            </embed>\n        </revision>\n    </submission_file>\n    <publication_format xmlns:onix=\"http://ns.editeur.org/onix/3.0/reference\"\n                        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" approved=\"true\" available=\"true\"\n                        physical_format=\"false\" xsi:schemaLocation=\"http://pkp.sfu.ca native.xsd\">\n        <name locale=\"en_US\">PDF</name>\n        <seq>1</seq>\n        <submission_file_ref id=\"1\" revision=\"1\"/>\n    </publication_format>\n</monograph>",
            "resources/tei_template.xml": "{% set ns = namespace() %}\n{% set metadata = obj.metadata %}\n{% set object_id = params['object_id'] %}\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<TEI xmlns=\"http://www.tei-c.org/ns/1.0\" version=\"5.0\" xml:id=\"TEI.{{object_id}}\">\n\n    <teiHeader xml:id=\"teiHeader.{{object_id}}\">\n        <fileDesc xml:id=\"fileDesc.{{object_id}}\">\n            <titleStmt xml:id=\"titleStmt.{{object_id}}\">\n                <title xml:id=\"titleStmt.title.{{object_id}}\">{{metadata['title']}}</title>\n                <author xml:id=\"author.{{object_id}}\">{{metadata['author']['lastname']}}, {{metadata['author']['firstname']}}</author>\n            </titleStmt>\n            <publicationStmt xml:id=\"publicationStmt.{{object_id}}\">\n                <p xml:id=\"publicationStmt.p.{{object_id}}\">Publication Information</p>\n            </publicationStmt>\n            <sourceDesc xml:id=\"sourceDesc.{{object_id}}\">\n                <msDesc xml:lang=\"de\" xml:id=\"msDesc.{{object_id}}\">\n                    <msIdentifier xml:id=\"msIdentifier.{{object_id}}\">\n                        <country lang=\"de\" xml:id=\"country.{{object_id}}\">Germany</country>\n                        <region lang=\"de\" xml:id=\"region.{{object_id}}\">Berlin</region>\n                        <settlement lang=\"de\" xml:id=\"settlement.{{object_id}}\">Berlin</settlement>\n                        <institution lang=\"de\" xml:id=\"institution.{{object_id}}\">Deutsches Arch\u00e4ologisches Institut</institution>\n                        <repository lang=\"de\" xml:id=\"repository.{{object_id}}\">#unknown</repository>\n                        <idno type=\"bookId\" xml:id=\"idno.bookId.{{object_id}}\">{{metadata['arachne_id']}}</idno>\n                        <idno type=\"zenonId\" xml:id=\"idno.zenonId.{{object_id}}\">{{object_id}}</idno>\n                    </msIdentifier>\n                    <head xml:id=\"head.{{object_id}}\">\n                        <title xml:id=\"sourceDesc.msDesc.title.{{object_id}}\">{{metadata['author']['lastname']}}, {{metadata['author']['firstname']}}; - {{metadata['title']}}</title>\n                    </head>\n                </msDesc>\n            </sourceDesc>\n        </fileDesc>\n    </teiHeader>\n\n    <facsimile xml:base=\"http://arachne.uni-koeln.de/images/stichwerke/BOOK-ZID{{object_id}}-AraID{{'%06d' | format(metadata['arachne_id'])}}\" xml:id=\"facsimile.{{object_id}}\">\n        {% set ns.graphic_id_list = [] %}\n        {% for file_path in glob(obj.get_representation_dir('jpg') + '/*.jpg')|sort() %}\n            <surface xml:id=\"surface.{{object_id}}.{{loop.index}}\">\n                {% set id = \"BOOK-\" + object_id + \"-\" + loop.index|string + \"_\" + splitext(basename(file_path))[0] %}\n                {% set ns.graphic_id_list = ns.graphic_id_list + [id] %}\n                <graphic xml:id=\"{{id}}\"\n                         mimeType=\"jpg\"\n                         url=\"BOOK-{{object_id}}-{{loop.index}}_{{basename(file_path)}}\" />\n\n            </surface>\n        {% endfor %}\n    </facsimile>\n\n    <text xml:id=\"text.{{object_id}}\">\n        <body xml:id=\"body.{{object_id}}\">\n            {% for id in ns.graphic_id_list %}\n                <div facs=\"{{id}}\" xml:id=\"text.body.div.{{id}}\">\n                    <p xml:id=\"text.body.div.p.{{id}}\" />\n                </div>\n            {% endfor %}\n        </body>\n    </text>\n\n</TEI>\n"
        }
    },
    "project_structure": {
        "files": [
            "Dockerfile",
            "VERSION",
            "entrypoint.sh",
            "poetry.lock",
            "pyproject.toml"
        ],
        "folders": []
    }
}