{
    "source_code_info": {
        "language": "JavaScript",
        "framework": "Node.js",
        "dependencies": {
            "package.json": "{\n  \"name\": \"madoc-ts\",\n  \"version\": \"1.0.0\",\n  \"main\": \"lib/index.js\",\n  \"type\": \"module\",\n  \"license\": \"MIT\",\n  \"author\": \"Stephen Fraser <stephen.fraser@digirati.com>\",\n  \"scripts\": {\n    \"dev\": \"NODE_ENV=development pm2 start ecosystem.config.cjs --no-daemon --wait-ready\",\n    \"storybook\": \"storybook dev -p 6500\",\n    \"test\": \"jest\",\n    \"test-storybook\": \"test-storybook --url http://localhost:6500 --maxWorkers 1\",\n    \"build\": \"concurrently yarn:generate-schema yarn:build:vite yarn:build:frontend yarn:shim-modules\",\n    \"dev:vite\": \"vite --config vite/vite.dev-server.js --host\",\n    \"start\": \"concurrently yarn:watch:vite-producer yarn:watch:vite-auth yarn:watch:vite-server yarn:watch:vite-scheduler\",\n    \"build:vite\": \"concurrently yarn:build:vite-producer yarn:build:vite-auth yarn:build:vite-server yarn:build:vite-scheduler\",\n    \"build:vite-producer\": \"vite build --config vite/vite.producer.js .\",\n    \"build:vite-auth\": \"vite build --config vite/vite.auth.js .\",\n    \"build:vite-server\": \"NODE_OPTIONS=--max-old-space-size=4096 vite build --config vite/vite.server.js .\",\n    \"build:vite-scheduler\": \"vite build --config vite/vite.scheduler.js .\",\n    \"build-storybook\": \"NODE_OPTIONS=--max-old-space-size=8096 node ./node_modules/.bin/storybook build\",\n    \"watch:vite\": \"yarn build:vite-producer && yarn build:vite-auth && yarn build:vite-server && build:vite-scheduler --watch\",\n    \"watch:vite-producer\": \"vite build --config vite/vite.producer.js . --watch\",\n    \"watch:vite-auth\": \"vite build --config vite/vite.auth.js . --watch\",\n    \"watch:vite-server\": \"vite build --config vite/vite.server.js . --watch\",\n    \"watch:vite-scheduler\": \"vite build --config vite/vite.scheduler.js . --watch\",\n    \"generate-migration\": \"node migrate.cjs create\",\n    \"generate-schema\": \"node generate-schemas.js\",\n    \"build:frontend\": \"NODE_OPTIONS=--max-old-space-size=4096 NODE_ENV=production vite build --config vite/vite.frontend.js\",\n    \"link:model-editor\": \"yarn link \\\"@capture-models/editor\\\"\",\n    \"unlink:model-editor\": \"yarn unlink \\\"@capture-models/editor\\\" && yarn install --force\",\n    \"link:model-helpers\": \"yarn link \\\"@capture-models/helpers\\\"\",\n    \"unlink:model-helpers\": \"yarn unlink \\\"@capture-models/helpers\\\" && yarn install --force\",\n    \"shim-modules\": \"rm -rf ./dist/node_modules && cp -R ./shim-modules/node_modules ./dist/node_modules\",\n    \"extract:api\": \"tsc -p ./tsconfig.types.json\"\n  },\n  \"browserslist\": \"> 0.25%, not dead\",\n  \"resolutions\": {\n    \"@atlas-viewer/atlas\": \"^2.0.6\",\n    \"@babel/core\": \"^7.20.12\",\n    \"@babel/runtime\": \"7.20.13\",\n    \"@babel/generator\": \"^7.20.14\",\n    \"@babel/types\": \"7.20.7\",\n    \"@iiif/vocabulary\": \"1.0.17\",\n    \"immutable\": \"3.8.2\",\n    \"react-i18next\": \"11.18.4\",\n    \"scheduler\": \"0.19.1\",\n    \"styled-components\": \"5.3.3\",\n    \"slonik-sql-tag-raw\": \"1.0.2\",\n    \"@atlas-viewer/iiif-image-api\": \"2.1.1\",\n    \"@types/styled-components\": \"^5.1.0\",\n    \"deepmerge\": \"4.2.2\",\n    \"react-dnd\": \"^11.1.3\",\n    \"react-dnd-multi-backend\": \"^6.0.2\",\n    \"dnd-multi-backend\": \"6.0.0\",\n    \"@iiif/helpers\": \"^1.0.6\",\n    \"html-entities\": \"1.4.0\",\n    \"formik\": \"^2.2.9\",\n    \"react\": \"17.0.2\",\n    \"react-dom\": \"17.0.2\",\n    \"@types/react\": \"^17.0.50\",\n    \"@types/react-dom\": \"^17.0.17\",\n    \"ws\": \"^8.8.0\",\n    \"popmotion\": \"^8.7.6\",\n    \"immer\": \"^9\"\n  },\n  \"dependencies\": {\n    \"@atlas-viewer/atlas\": \"^2.0.6\",\n    \"@atlas-viewer/iiif-image-api\": \"^2.1.1\",\n    \"@babel/runtime\": \"^7.20.13\",\n    \"@iiif/builder\": \"^2.0.0\",\n    \"@iiif/helpers\": \"^1.0.6\",\n    \"@iiif/parser\": \"^2.0.2\",\n    \"@iiif/presentation-2\": \"^1.0.2\",\n    \"@iiif/presentation-3\": \"^2.1.3\",\n    \"@iiif/presentation-3-normalized\": \"^0.9.7\",\n    \"@koa/router\": \"^10.1.1\",\n    \"@madoc.io/types\": \"./npm/madoc-types\",\n    \"@manifest-editor/iiif-browser-bundle\": \"https://pkg.csb.dev/digirati-co-uk/iiif-manifest-editor/commit/cc804fcf/@manifest-editor/iiif-browser-bundle\",\n    \"@slonik/migrator\": \"^0.2.0\",\n    \"@styled-icons/entypo\": \"^10.34.0\",\n    \"adm-zip\": \"^0.5.10\",\n    \"ajv\": \"^6.12.3\",\n    \"bcrypt\": \"^5.0.1\",\n    \"browser-cookies\": \"^1.2.0\",\n    \"bullmq\": \"^1.51.2\",\n    \"color-hash\": \"^1.0.3\",\n    \"colorthief\": \"^2.3.2\",\n    \"content-type\": \"^1.0.4\",\n    \"contrast\": \"^1.0.1\",\n    \"cookie-parser\": \"^1.4.5\",\n    \"core-js\": \"3\",\n    \"cross-fetch\": \"^3.1.5\",\n    \"css-loader\": \"^4.2.2\",\n    \"csv-stringify\": \"^6.2.3\",\n    \"deepmerge\": \"^4.2.2\",\n    \"del\": \"^6.0.0\",\n    \"dom-parser\": \"^0.1.6\",\n    \"draft-js\": \"^0.11.7\",\n    \"draft-js-export-html\": \"^1.4.1\",\n    \"draft-js-import-element\": \"^1.4.0\",\n    \"draft-js-import-html\": \"^1.4.1\",\n    \"draft-js-utils\": \"^1.4.0\",\n    \"easy-peasy\": \"^3.3.0\",\n    \"email-validator\": \"^2.0.4\",\n    \"fast-copy\": \"^2.1.1\",\n    \"form-data\": \"^4.0.0\",\n    \"formik\": \"^2.2.9\",\n    \"framer-motion\": \"^2.0.1\",\n    \"i18next\": \"^19.7.0\",\n    \"i18next-browser-languagedetector\": \"^6.0.1\",\n    \"i18next-chained-backend\": \"^2.0.1\",\n    \"i18next-fs-backend\": \"^1.0.7\",\n    \"i18next-http-backend\": \"^1.0.19\",\n    \"i18next-localstorage-backend\": \"^3.1.1\",\n    \"immer\": \"^9.0.6\",\n    \"jose\": \"^1.28.2\",\n    \"js-cookie\": \"^2.2.1\",\n    \"koa\": \"^2.11.0\",\n    \"koa-body\": \"^4.1.1\",\n    \"koa-conditional-get\": \"^3.0.0\",\n    \"koa-i18next\": \"^1.1.1\",\n    \"koa-i18next-detector\": \"^0.7.2\",\n    \"koa-json\": \"^2.0.2\",\n    \"koa-logger\": \"^3.2.1\",\n    \"koa-passport\": \"^4.1.4\",\n    \"koa-send\": \"^5.0.0\",\n    \"koa2-connect\": \"^1.0.2\",\n    \"locale-codes\": \"^1.3.1\",\n    \"localforage\": \"^1.10.0\",\n    \"memfs\": \"^3.1.2\",\n    \"memory-cache\": \"^0.2.0\",\n    \"mirador\": \"^3.2.0\",\n    \"mirador-image-tools\": \"^0.11.0\",\n    \"mitt\": \"3.0.1\",\n    \"mjml\": \"^4.9.3\",\n    \"mjml-react\": \"^2.0.0\",\n    \"mkdirp\": \"^1.0.4\",\n    \"msgpackr-extract\": \"^3.0.3\",\n    \"mustache\": \"^4.2.0\",\n    \"mysql\": \"^2.18.1\",\n    \"node-fetch\": \"^2.6.7\",\n    \"node-schedule\": \"^2.0.0\",\n    \"node-stream-zip\": \"^1.13.2\",\n    \"nodemailer\": \"^6.6.3\",\n    \"object-assign\": \"^4.1.1\",\n    \"passport\": \"^0.5.0\",\n    \"passport-custom\": \"^1.1.1\",\n    \"passport-github2\": \"^0.1.12\",\n    \"path-to-regexp\": \"^6.2.0\",\n    \"pm2\": \"^5.2.2\",\n    \"polygon-editor\": \"0.0.4\",\n    \"query-string\": \"^6.12.1\",\n    \"react\": \"^17.0.2\",\n    \"react-accessible-dropdown-menu-hook\": \"^3.1.0\",\n    \"react-beautiful-dnd\": \"^13.1.0\",\n    \"react-dnd\": \"^11.1.3\",\n    \"react-dnd-html5-backend\": \"^11.1.3\",\n    \"react-dnd-multi-backend\": \"^6.0.2\",\n    \"react-dnd-touch-backend\": \"^11.1.3\",\n    \"react-dom\": \"^17.0.2\",\n    \"react-dropzone\": \"^11.3.2\",\n    \"react-error-boundary\": \"^2.3.1\",\n    \"react-functional-select\": \"^3.3.3\",\n    \"react-helmet\": \"^6.1.0\",\n    \"react-i18next\": \"^11.18.4\",\n    \"react-iiif-vault\": \"^1.0.9\",\n    \"react-intersection-observer\": \"^8.26.2\",\n    \"react-mosaic-component\": \"^4.1.1\",\n    \"react-query\": \"^2.26.4\",\n    \"react-router\": \"^6.4.0-pre.13\",\n    \"react-router-dom\": \"^6.4.0-pre.13\",\n    \"react-rte\": \"0.16.1\",\n    \"react-stack-grid\": \"^0.7.1\",\n    \"react-syntax-highlighter\": \"^15.4.3\",\n    \"react-textarea-autosize\": \"^8.3.1\",\n    \"react-timeago\": \"^4.4.0\",\n    \"react-tooltip\": \"^5.18.0\",\n    \"redux-batched-subscribe\": \"^0.1.6\",\n    \"rich-markdown-editor\": \"11.17.8\",\n    \"semver\": \"^7.3.5\",\n    \"sharp\": \"^0.30.2\",\n    \"slonik\": \"^23.5.5\",\n    \"slugify\": \"^1.4.7\",\n    \"source-map-support\": \"^0.5.21\",\n    \"sourcemapped-stacktrace\": \"^1.1.11\",\n    \"styled-components\": \"^5.3.5\",\n    \"styled-theming\": \"^2.2.0\",\n    \"ts-loader\": \"^7.0.2\",\n    \"typesafe-actions\": \"^5.1.0\",\n    \"use-debounce\": \"^3.3.0\",\n    \"use-match-media-hook\": \"^1.0.1\",\n    \"use-open-seadragon\": \"^1.0.0\",\n    \"uuid\": \"^7.0.1\",\n    \"uuid-validate\": \"^0.0.3\",\n    \"vm2\": \"^3.9.6\",\n    \"whatwg-url\": \"^11.0.0\",\n    \"zustand\": \"^4.3.2\"\n  },\n  \"devDependencies\": {\n    \"@babel/core\": \"^7.20.12\",\n    \"@babel/generator\": \"^7.20.7\",\n    \"@babel/plugin-proposal-decorators\": \"^7.20.13\",\n    \"@babel/preset-env\": \"^7.20.2\",\n    \"@babel/types\": \"7.20.7\",\n    \"@blueprintjs/icons\": \"^3.20.1\",\n    \"@pmmmwh/react-refresh-webpack-plugin\": \"^0.5.1\",\n    \"@storybook/addon-docs\": \"^7.0.0-beta.45\",\n    \"@storybook/addon-essentials\": \"^7.0.0-beta.45\",\n    \"@storybook/addon-interactions\": \"^7.0.0-beta.45\",\n    \"@storybook/addons\": \"^7.0.0-beta.45\",\n    \"@storybook/builder-vite\": \"^7.0.0-beta.45\",\n    \"@storybook/channel-postmessage\": \"^7.0.0-beta.45\",\n    \"@storybook/channel-websocket\": \"^7.0.0-beta.45\",\n    \"@storybook/core\": \"^6.5.9\",\n    \"@storybook/jest\": \"^0.0.10\",\n    \"@storybook/react\": \"^7.0.0-beta.45\",\n    \"@storybook/react-vite\": \"^7.0.0-beta.45\",\n    \"@storybook/test-runner\": \"^0.9.4\",\n    \"@storybook/testing-library\": \"^0.0.13\",\n    \"@types/adm-zip\": \"^0.5.0\",\n    \"@types/bcrypt\": \"^5.0.0\",\n    \"@types/color-hash\": \"^1.0.0\",\n    \"@types/content-type\": \"^1.1.3\",\n    \"@types/cookie-parser\": \"^1.4.2\",\n    \"@types/dom-parser\": \"^0.1.1\",\n    \"@types/draft-js\": \"^0.10.43\",\n    \"@types/jest\": \"^29.4.0\",\n    \"@types/js-cookie\": \"^2.2.6\",\n    \"@types/json-schema\": \"^7.0.7\",\n    \"@types/koa\": \"^2.11.0\",\n    \"@types/koa-json\": \"^2.0.18\",\n    \"@types/koa-logger\": \"^3.1.1\",\n    \"@types/koa-passport\": \"^4.0.2\",\n    \"@types/koa-send\": \"^4.1.2\",\n    \"@types/koa__router\": \"^8.0.2\",\n    \"@types/memory-cache\": \"^0.2.1\",\n    \"@types/mjml\": \"^4.7.0\",\n    \"@types/mjml-react\": \"^2.0.0\",\n    \"@types/mkdirp\": \"^1.0.0\",\n    \"@types/mustache\": \"^4.1.1\",\n    \"@types/mysql\": \"^2.15.9\",\n    \"@types/node-fetch\": \"^2.5.5\",\n    \"@types/node-schedule\": \"^1.3.1\",\n    \"@types/nodemailer\": \"^6.4.4\",\n    \"@types/passport\": \"^1.0.7\",\n    \"@types/passport-github2\": \"^1.2.5\",\n    \"@types/react\": \"^17.0.50\",\n    \"@types/react-beautiful-dnd\": \"^12.1.2\",\n    \"@types/react-dom\": \"^17.0.17\",\n    \"@types/react-helmet\": \"^6.1.0\",\n    \"@types/react-rte\": \"^0.16.1\",\n    \"@types/react-stack-grid\": \"^0.7.0\",\n    \"@types/react-timeago\": \"^4.1.1\",\n    \"@types/redux-batched-subscribe\": \"^0.1.4\",\n    \"@types/semver\": \"^7.3.6\",\n    \"@types/sharp\": \"^0.24.0\",\n    \"@types/slonik\": \"^22.1.4\",\n    \"@types/styled-components\": \"^5.1.0\",\n    \"@types/styled-theming\": \"^2.2.5\",\n    \"@types/uuid\": \"^7.0.0\",\n    \"@types/uuid-validate\": \"^0.0.1\",\n    \"@typescript-eslint/eslint-plugin\": \"^6.19.0\",\n    \"@typescript-eslint/parser\": \"^6.19.0\",\n    \"@vitejs/plugin-legacy\": \"^3.0.1\",\n    \"@vitejs/plugin-react\": \"^3.0.1\",\n    \"@vitest/ui\": \"^0.28.2\",\n    \"autoprefixer\": \"^10.4.14\",\n    \"babel-plugin-react-data-testid\": \"^0.2.0\",\n    \"babel-plugin-styled-components\": \"^2.0.7\",\n    \"babel-plugin-transform-typescript-metadata\": \"^0.3.2\",\n    \"bundle-duplicates-plugin\": \"^0.0.1\",\n    \"chalk\": \"4.1.2\",\n    \"concurrently\": \"^7.0.0\",\n    \"eslint\": \"^8.56.0\",\n    \"eslint-import-resolver-typescript\": \"^3.6.1\",\n    \"eslint-plugin-babel\": \"^5.3.1\",\n    \"eslint-plugin-import\": \"^2.29.1\",\n    \"eslint-plugin-jest\": \"^27.6.3\",\n    \"eslint-plugin-json-format\": \"^2.0.1\",\n    \"eslint-plugin-prettier\": \"^4.2.1\",\n    \"eslint-plugin-react\": \"^7.33.2\",\n    \"eslint-plugin-react-hooks\": \"^4.6.0\",\n    \"eslint-plugin-storybook\": \"^0.6.15\",\n    \"happy-dom\": \"^5.3.1\",\n    \"inspectpack\": \"^4.5.2\",\n    \"jest\": \"^29.4.2\",\n    \"jest-environment-jsdom\": \"^29.4.2\",\n    \"jsdom\": \"^16.5.1\",\n    \"koa-connect\": \"^2.1.0\",\n    \"postcss\": \"^8.4.27\",\n    \"prettier\": \"^2.8.8\",\n    \"react-is\": \"^16.13.1\",\n    \"react-query-devtools\": \"^2.4.7\",\n    \"react-refresh\": \"^0.10.0\",\n    \"storybook\": \"^7.0.0-beta.45\",\n    \"strip-indent\": \"^4.0.0\",\n    \"tailwindcss\": \"^3.3.3\",\n    \"traverse\": \"^0.6.6\",\n    \"ts-jest\": \"^29.0.5\",\n    \"ts-node\": \"^9.1.1\",\n    \"ts-react-display-name\": \"^1.2.0\",\n    \"typescript\": \"^4.9.4\",\n    \"typescript-json-schema\": \"^0.55.0\",\n    \"typescript-plugin-styled-components\": \"^2.0.0\",\n    \"vite\": \"^4.0.5\",\n    \"vite-node\": \"^0.28.2\",\n    \"vite-plugin-environment\": \"^1.1.3\",\n    \"vite-plugin-require-transform\": \"^1.0.6\",\n    \"vitest\": \"^0.28.2\",\n    \"ws\": \"^8.8.0\"\n  },\n  \"publishConfig\": {\n    \"access\": \"restricted\"\n  },\n  \"jest\": {\n    \"preset\": \"ts-jest\",\n    \"modulePathIgnorePatterns\": [\n      \"dist/\",\n      \"lib/\"\n    ]\n  }\n}\n"
        },
        "database": "MySQL",
        "build_system": "npm",
        "config_files": {
            ".env": "# Postgres\nPOSTGRES_DB=postgres\nPOSTGRES_PORT=5432\nPOSTGRES_USER=postgres\nPOSTGRES_PASSWORD=postgres_password\n\n# Tasks API\nTASKS_QUEUE_LIST=tasks-api,madoc-ts\n\n# Postgres credentials\nPOSTGRES_MADOC_TS_USER=madoc_ts\nPOSTGRES_MADOC_TS_SCHEMA=madoc_ts\nPOSTGRES_MADOC_TS_PASSWORD=madoc_ts_password\n\nPOSTGRES_TASKS_API_USER=tasks_api\nPOSTGRES_TASKS_API_SCHEMA=tasks_api\nPOSTGRES_TASKS_API_PASSWORD=tasks_api_password\n\nPOSTGRES_MODELS_API_USER=models_api\nPOSTGRES_MODELS_API_SCHEMA=models_api\nPOSTGRES_MODELS_API_PASSWORD=models_api_password\n\nPOSTGRES_CONFIG_SERVICE_USER=config_service\nPOSTGRES_CONFIG_SERVICE_SCHEMA=config_service\nPOSTGRES_CONFIG_SERVICE_PASSWORD=config_service_password\n\nPOSTGRES_SEARCH_API_USER=search_api\nPOSTGRES_SEARCH_API_SCHEMA=search_api\nPOSTGRES_SEARCH_API_PASSWORD=search_api_password\n\n# New SMTP\nSMTP_HOST=host.docker.internal\nSMTP_PORT=1025\nSMTP_SECURITY=None\nSMTP_USER=project.1\nSMTP_PASSWORD=secret.1\n\nMAIL_FROM_USER=\"Madoc local <noreply@madoc.io>\"\nMADOC_INSTALLATION_CODE='$2b$14$9qnqDtpUMt7PQ0bs300y8el116vUbm4nF8Bf5vltCx78ZzuAWBu/K'\n\n# HTTPS\n# LOCAL PORT FOR HTTPS, CAN BE CHANGED\nPORTS_GATEWAY_HTTPS=443\n#GATEWAY_HOST=http://localhost:8888 <-- change for http\nGATEWAY_HOST=https://madoc.local\n",
            "services/madoc-ts/config.json": "{\n  \"cookieName\": \"madoc\",\n  \"tokenExpires\": 1209600,\n  \"tokenRefresh\": 172800,\n  \"defaultSiteConfiguration\": {\n    \"allowCollectionNavigation\": true,\n    \"allowManifestNavigation\": true,\n    \"allowCanvasNavigation\": true,\n    \"randomlyAssignCanvas\": false,\n    \"priorityRandomness\": true,\n    \"randomCanvas\": true,\n    \"claimGranularity\": \"canvas\",\n    \"maxContributionsPerResource\": false,\n    \"allowSubmissionsWhenCanvasComplete\": false,\n    \"randomlyAssignReviewer\": false,\n    \"manuallyAssignedReviewer\": null,\n    \"adminsAreReviewers\": true,\n    \"hideCompletedResources\": false,\n    \"revisionApprovalsRequired\": 20,\n    \"contributionWarningTime\": false,\n    \"skipAutomaticOCRImport\": false,\n    \"allowPersonalNotes\": false,\n    \"defaultEditorOrientation\": \"horizontal\",\n    \"skipManifestListingPage\": false,\n    \"hideStatistics\": false,\n    \"hideProjectCollectionNavigation\": false,\n    \"hideProjectManifestNavigation\": false,\n    \"searchStrategy\": \"websearch\",\n    \"hideManifestMetadataOnCanvas\": false,\n    \"hideCanvasThumbnailNavigation\": false,\n    \"showSearchFacetCount\": false,\n    \"miradorCanvasPage\": false,\n    \"universalViewerCanvasPage\": false,\n    \"contributionMode\": \"annotation\",\n    \"shortExpiryTime\": \"10\",\n    \"longExpiryTime\": \"1440\",\n    \"modelPageShowAnnotations\": \"when-open\",\n    \"modelPageShowDocument\": \"when-open\",\n    \"atlasBackground\": \"#f9f9f9\",\n    \"canvasPageShowAnnotations\": \"when-open\",\n    \"canvasPageShowDocument\": \"when-open\",\n    \"forkMode\": false,\n    \"reviewOptions\": {\n      \"allowMerging\": false\n    },\n    \"modelPageOptions\": {\n      \"fixedTranscriptionBar\": false,\n      \"preventContributionAfterRejection\": false,\n      \"preventContributionAfterSubmission\": false,\n      \"preventMultipleUserSubmissionsPerResource\": false,\n      \"showRandomManifestAfterSubmission\": true,\n      \"preventContributionAfterManifestUnassign\": false,\n      \"hideViewerControls\": false,\n      \"enableTooltipDescriptions\": false,\n      \"enableSplitView\": false\n    },\n    \"projectPageOptions\": {\n      \"hideStartContributing\": false,\n      \"hideSearchButton\": false,\n      \"hideRandomManifest\": false,\n      \"hideRandomCanvas\": false,\n      \"generatePDF\": false,\n      \"reviewerDashboard\": false\n    },\n    \"manifestPageOptions\": {\n      \"hideStartContributing\": false,\n      \"hideOpenInMirador\": false,\n      \"hideSearchButton\": false,\n      \"hideRandomCanvas\": false,\n      \"hideFilterImages\": false,\n      \"directModelPage\": false\n    },\n    \"headerOptions\": {\n      \"hideSiteTitle\": false,\n      \"hideProjectsLink\": false,\n      \"hideCollectionsLink\": false,\n      \"hideDashboardLink\": false,\n      \"hidePageNavLinks\": false,\n      \"hideSearchBar\": false\n    },\n    \"searchOptions\": {\n      \"nonLatinFulltext\": false,\n      \"searchMultipleFields\": false,\n      \"onlyShowManifests\": false\n    },\n    \"activityStreams\": {\n      \"manifest\": true,\n      \"canvas\": false,\n      \"curated\": true,\n      \"published\": false\n    },\n    \"metadataSuggestions\": {\n      \"collection\": false,\n      \"manifest\": false,\n      \"canvas\": false\n    }\n  },\n  \"permissions\": {\n    \"admin\": [\"site.admin\", \"tasks.admin\", \"models.admin\"],\n    \"reviewer\": [\n      \"tasks.create\",\n      \"tasks.progress\",\n      \"models.revision\",\n      \"models.create\",\n      \"models.contribute\",\n      \"models.view_published\",\n      \"site.view\"\n    ],\n    \"limited-reviewer\": [\n      \"tasks.create\",\n      \"tasks.progress\",\n      \"models.revision\",\n      \"models.contribute\",\n      \"models.view_published\",\n      \"site.view\"\n    ],\n    \"transcriber\": [\"tasks.progress\", \"models.revision\", \"models.contribute\", \"models.view_published\", \"site.view\"],\n    \"limited-transcriber\": [\n      \"tasks.progress\",\n      \"models.revision\",\n      \"models.contribute\",\n      \"models.view_published\",\n      \"site.view\"\n    ],\n    \"viewer\": [\"models.view_published\", \"site.view\"],\n    \"editor\": [\"models.view_published\", \"site.view\"]\n  }\n}\n",
            "docker-compose.yml": "version: \"3.2\"\nservices:\n  # Internal services\n\n  gateway:\n    build:\n      context: services/gateway\n      dockerfile: Dockerfile.dev\n    volumes:\n      - ./var/certs:/certs\n    ports:\n      - \"${PORTS_GATEWAY_HTTPS:-443}:443\"\n      - \"${PORTS_GATEWAY:-8888}:8080\"\n    restart: unless-stopped\n    depends_on:\n      - tasks-api\n      - model-api\n      - madoc-ts\n      - config-service\n      - storage-api\n      - okra\n      - search\n    links:\n      - tasks-api\n      - model-api\n      - madoc-ts\n      - config-service\n      - storage-api\n      - okra\n      - search\n\n  madoc-ts-vite:\n    build:\n      context: services/madoc-ts\n      dockerfile: Dockerfile.vite\n    volumes:\n      - ./services/madoc-ts/package.json:/home/node/app/package.json:delegated\n      - ./services/madoc-ts/tailwind.config.js:/home/node/app/tailwind.config.js:delegated\n      - ./services/madoc-ts/yarn.lock:/home/node/app/yarn.lock:delegated\n      - ./services/madoc-ts/src:/home/node/app/src\n      - ./services/madoc-ts/vite:/home/node/app/vite\n      - ./var/.vite-cache:/home/node/app/node_modules/.vite\n      - ./var/certs:/certs\n    ports:\n      - \"3088:3088\"\n      - \"3089:3089\"\n\n  madoc-ts:\n    tty: true\n    build:\n      context: services/madoc-ts\n      dockerfile: Dockerfile.dev\n    volumes:\n      - ./services/madoc-ts/dist:/home/node/app/dist:delegated\n      - ./services/madoc-ts/src:/home/node/app/src\n      - ./services/madoc-ts/package.json:/home/node/app/package.json:delegated\n      - ./services/madoc-ts/yarn.lock:/home/node/app/yarn.lock:delegated\n      - ./services/madoc-ts/migrations:/home/node/app/migrations:delegated\n      - ./services/madoc-ts/schemas:/home/node/app/schemas:delegated\n      - ./services/madoc-ts/ecosystem.config.cjs:/home/node/app/ecosystem.config.cjs\n      - ./services/madoc-ts/vite:/home/node/app/vite:delegated\n      - ./services/madoc-ts/entrypoint:/home/node/app/entrypoint:delegated\n      - ./services/madoc-ts/config.json:/home/node/app/config.json\n      - ./services/madoc-ts/service-jwts:/home/node/app/service-jwts\n      - ./services/madoc-ts/themes:/home/node/app/themes\n      - ./services/madoc-ts/translations:/home/node/app/translations\n      - ./services/madoc-ts/npm:/home/node/app/npm\n      - ./var/certs:/home/node/app/openssl-certs\n      - ./var/jwt:/home/node/app/service-jwt-responses\n      - ./var/files:/home/node/app/files\n    environment:\n      - DATABASE_HOST=shared-postgres\n      - DATABASE_NAME=${POSTGRES_DB}\n      - DATABASE_PORT=${POSTGRES_PORT}\n      - DATABASE_USER=${POSTGRES_MADOC_TS_USER}\n      - DATABASE_SCHEMA=${POSTGRES_MADOC_TS_SCHEMA}\n      - DATABASE_PASSWORD=${POSTGRES_MADOC_TS_PASSWORD}\n      - REDIS_HOST=gateway-redis\n      - API_GATEWAY=http://gateway:8080\n      - GATEWAY_HOST=${GATEWAY_HOST}\n      - STORAGE_FILE_DIRECTORY=/home/node/app/files\n      - MADOC_INSTALLATION_CODE=${MADOC_INSTALLATION_CODE}\n      - MIGRATE=true\n      - NODE_ENV=development\n      - SMTP_HOST=${SMTP_HOST}\n      - SMTP_PORT=${SMTP_PORT}\n      - SMTP_SECURITY=${SMTP_SECURITY}\n      - SMTP_USER=${SMTP_USER}\n      - SMTP_PASSWORD=${SMTP_PASSWORD}\n      - MAIL_FROM_USER=${MAIL_FROM_USER}\n    ports:\n      - \"127.0.0.1:${PORTS_MADOC_TS_DEBUGGER:-9230}:9230\"\n    links:\n      - shared-postgres\n      - madoc-ts-vite\n\n  tasks-api:\n    tty: true\n    image: ghcr.io/digirati-co-uk/tasks-api:latest\n    platform: linux/amd64\n    environment:\n      - SERVER_PORT=3000\n      - DATABASE_HOST=shared-postgres\n      - DATABASE_NAME=${POSTGRES_DB}\n      - DATABASE_PORT=${POSTGRES_PORT}\n      - DATABASE_USER=${POSTGRES_TASKS_API_USER}\n      - DATABASE_SCHEMA=${POSTGRES_TASKS_API_SCHEMA}\n      - DATABASE_PASSWORD=${POSTGRES_TASKS_API_PASSWORD}\n      - QUEUE_LIST=${TASKS_QUEUE_LIST}\n      - REDIS_HOST=gateway-redis\n    links:\n      - shared-postgres\n      - gateway-redis\n\n  model-api:\n    tty: true\n    image: digirati/capture-models:latest\n    platform: linux/amd64\n    environment:\n      - SERVER_PORT=3000\n      - DATABASE_HOST=shared-postgres\n      - DATABASE_NAME=${POSTGRES_DB}\n      - DATABASE_PORT=${POSTGRES_PORT}\n      - DATABASE_USER=${POSTGRES_MODELS_API_USER}\n      - DATABASE_SCHEMA=${POSTGRES_MODELS_API_SCHEMA}\n      - DATABASE_PASSWORD=${POSTGRES_MODELS_API_PASSWORD}\n    links:\n      - shared-postgres\n\n  shared-postgres:\n    build:\n      context: services/shared-postgres\n    environment:\n      - POSTGRES_DB=${POSTGRES_DB}\n      - POSTGRES_USER=${POSTGRES_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n      - POSTGRES_MADOC_TS_USER=${POSTGRES_MADOC_TS_USER}\n      - POSTGRES_MADOC_TS_SCHEMA=${POSTGRES_MADOC_TS_SCHEMA}\n      - POSTGRES_MADOC_TS_PASSWORD=${POSTGRES_MADOC_TS_PASSWORD}\n      - POSTGRES_TASKS_API_USER=${POSTGRES_TASKS_API_USER}\n      - POSTGRES_TASKS_API_SCHEMA=${POSTGRES_TASKS_API_SCHEMA}\n      - POSTGRES_TASKS_API_PASSWORD=${POSTGRES_TASKS_API_PASSWORD}\n      - POSTGRES_MODELS_API_USER=${POSTGRES_MODELS_API_USER}\n      - POSTGRES_MODELS_API_SCHEMA=${POSTGRES_MODELS_API_SCHEMA}\n      - POSTGRES_MODELS_API_PASSWORD=${POSTGRES_MODELS_API_PASSWORD}\n      - POSTGRES_CONFIG_SERVICE_USER=${POSTGRES_CONFIG_SERVICE_USER}\n      - POSTGRES_CONFIG_SERVICE_SCHEMA=${POSTGRES_CONFIG_SERVICE_SCHEMA}\n      - POSTGRES_CONFIG_SERVICE_PASSWORD=${POSTGRES_CONFIG_SERVICE_PASSWORD}\n      - POSTGRES_SEARCH_API_USER=${POSTGRES_SEARCH_API_USER}\n      - POSTGRES_SEARCH_API_SCHEMA=${POSTGRES_SEARCH_API_SCHEMA}\n      - POSTGRES_SEARCH_API_PASSWORD=${POSTGRES_SEARCH_API_PASSWORD}\n\n    ports:\n      - \"${PORTS_SHARED_POSTGRES:-5400}:5432\"\n    volumes:\n      - ./var/shared-database:/var/lib/postgresql/data\n\n  gateway-redis:\n    image: redis:5-alpine\n\n  config-service:\n    image: digirati/madoc_config_service_django:175410fc5b7dbef4cc259686564fbedeb60c8789\n    platform: linux/amd64\n    environment:\n      - USE_DOCKER=yes\n      - IPYTHONDIR=/app/.ipython\n      - MIGRATE=True\n      - LOAD=False\n      - DJANGO_DEBUG=False\n      - WAITRESS=False\n      - POSTGRES_HOST=shared-postgres\n      - POSTGRES_PORT=${POSTGRES_PORT}\n      - POSTGRES_USER=${POSTGRES_CONFIG_SERVICE_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_CONFIG_SERVICE_PASSWORD}\n      - POSTGRES_SCHEMA=${POSTGRES_CONFIG_SERVICE_SCHEMA}\n      - POSTGRES_DB=${POSTGRES_DB}\n      - DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@shared-postgres:${POSTGRES_PORT}/${POSTGRES_DB}\n    links:\n      - shared-postgres\n    volumes:\n      - ./configuration/schemas:/app/configurator/schemas\n      - ./configuration/defaults:/app/configurator/default_config\n\n  storage-api:\n    tty: true\n    image: ghcr.io/digirati-co-uk/storage-api:main\n    platform: linux/amd64\n    environment:\n      - GATEWAY_HOST=${GATEWAY_HOST}\n    volumes:\n      - ./var/files/storage-api:/home/node/app/files\n    links:\n      - shared-postgres\n\n  search:\n    image: ghcr.io/digirati-co-uk/madoc-search-service:247f854b1258e3971907e6912cef2374a1da8474\n    platform: linux/amd64\n    #    build:\n    #      context: services/search\n    #      dockerfile: Dockerfile\n    environment:\n      - BROWSABLE=False\n      - USE_DOCKER=yes\n      - IPYTHONDIR=/app/.ipython\n      - MIGRATE=True\n      - LOAD=False\n      - DEBUG=True\n      - DJANGO_DEBUG=True\n      - WAITRESS=False\n      - POSTGRES_HOST=shared-postgres\n      - POSTGRES_PORT=${POSTGRES_PORT}\n      - POSTGRES_USER=${POSTGRES_SEARCH_API_USER}\n      - POSTGRES_PASSWORD=${POSTGRES_SEARCH_API_PASSWORD}\n      - POSTGRES_SCHEMA=${POSTGRES_SEARCH_API_SCHEMA}\n      - POSTGRES_DB=${POSTGRES_DB}\n      - DATABASE_URL=postgres://${POSTGRES_SEARCH_API_USER}:${POSTGRES_SEARCH_API_PASSWORD}@shared-postgres:${POSTGRES_PORT}/${POSTGRES_DB}\n    links:\n      - shared-postgres\n  #    volumes:\n  #      - ./services/search/search_service:/app\n\n  okra:\n    image: digirati/okra:latest\n    platform: linux/amd64\n",
            "services/madoc-ts/Dockerfile": "FROM node:18-bullseye as build\n\nWORKDIR /home/node/app\n\nCOPY ./package.json /home/node/app/package.json\nCOPY ./yarn.lock /home/node/app/yarn.lock\nCOPY ./npm /home/node/app/npm\n\nRUN yarn install --no-interactive --frozen-lockfile\n\n# These may not be required.\nCOPY ./tsconfig.json /home/node/app/tsconfig.json\nCOPY ./tsconfig.frontend.json /home/node/app/tsconfig.frontend.json\n\n# These are required\nCOPY ./src /home/node/app/src\nCOPY ./schemas /home/node/app/schemas\nCOPY ./generate-schemas.js /home/node/app/generate-schemas.js\nCOPY ./themes /home/node/app/themes\nCOPY ./vite /home/node/app/vite\nCOPY ./vite.config.js /home/node/app/vite.config.js\nCOPY ./postcss.config.js /home/node/app/postcss.config.js\nCOPY ./tailwind.config.js /home/node/app/tailwind.config.js\n\nENV NODE_ENV=production\n\nRUN yarn generate-schema\nRUN yarn build:vite-producer\nRUN yarn build:vite-auth\nRUN yarn build:vite-scheduler\nRUN yarn build:frontend\nRUN yarn build:vite-server\n\nFROM node:18-bullseye as modules\n\nWORKDIR /home/node/app\n\nCOPY --from=build /home/node/app/package.json /home/node/app/package.json\nCOPY --from=build /home/node/app/yarn.lock /home/node/app/yarn.lock\nCOPY --from=build /home/node/app/npm /home/node/app/npm\n\nRUN yarn install --no-interactive --frozen-lockfile --production=true\n\nFROM node:18-bullseye\n\nARG BUILD_TIME='unknown'\nARG BUILD_VERSION='unknown'\nARG BUILD_REVISION='unknown'\n\nWORKDIR /home/node/app\n\nRUN npm install -g pm2@5\n\nCOPY --from=build /home/node/app/package.json /home/node/app/package.json\nCOPY --from=build /home/node/app/yarn.lock /home/node/app/yarn.lock\nCOPY --from=modules /home/node/app/node_modules /home/node/app/node_modules\nCOPY --from=build /home/node/app/dist /home/node/app/dist\nCOPY ./ecosystem.config.cjs /home/node/app/ecosystem.config.cjs\nCOPY ./npm /home/node/app/npm\n\nENV SERVER_PORT=3000\nENV DATABASE_HOST=localhost\nENV DATABASE_NAME=postgres\nENV DATABASE_PORT=5400\nENV DATABASE_USER=postgres\nENV DATABASE_SCHEMA=public\nENV DATABASE_PASSWORD=postgres\nENV NODE_ENV=production\nENV API_GATEWAY_HOST=http://gateway\n\nENV BUILD_TIME=${BUILD_TIME}\nENV BUILD_VERSION=${BUILD_VERSION}\nENV BUILD_REVISION=${BUILD_REVISION}\n\nEXPOSE 3000\nEXPOSE 3001\n\nRUN mkdir -p /home/node/app/service-jwt && \\\n    mkdir -p /home/node/app/service-jwt-responses && \\\n    mkdir -p /home/node/app/files && \\\n    mkdir -p /home/node/app/openssl-certs && \\\n    chown node:node /home/node/app/service-jwt && \\\n    chown node:node /home/node/app/service-jwt-responses && \\\n    chown node:node /home/node/app/files && \\\n    chown node:node /home/node/app/openssl-certs\n\nUSER node\n\nCOPY ./migrations /home/node/app/migrations\nCOPY ./service-jwts /home/node/app/service-jwts\nCOPY ./config.json /home/node/app/config.json\nCOPY ./translations /home/node/app/translations\nCOPY ./themes /home/node/app/themes\nCOPY ./schemas /home/node/app/schemas\nCOPY ./entrypoint /home/node/app/entrypoint\n\nCMD [\"pm2-runtime\", \"start\", \"./ecosystem.config.cjs\"]\n\n"
        },
        "static_files": {}
    },
    "project_structure": {
        "files": [
            "Dockerfile",
            "Dockerfile.dev",
            "README.md",
            "nginx.conf"
        ],
        "folders": [
            "conf.d",
            "dev",
            "www"
        ]
    }
}